{"meta":{"title":"Knowledge Has NO Limit","subtitle":null,"description":null,"author":"Chern Tau","url":"http://yoursite.com"},"pages":[{"title":"categories","date":"2018-07-26T02:03:06.000Z","updated":"2018-07-26T02:07:42.501Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"决策树 算法","slug":"决策树-算法","date":"2018-06-30T16:17:05.000Z","updated":"2018-07-29T04:12:29.957Z","comments":true,"path":"2018/07/01/决策树-算法/","link":"","permalink":"http://yoursite.com/2018/07/01/决策树-算法/","excerpt":"","text":"决策树算法$\\S$ 1 $ $ 从分类问题开始分类（Classification） 任务就是确定对象属于哪个预定义的目标类。分类问题不仅是一个普遍存在的问题，而且是其他更加复杂的决策问题的基础，更是机器学习和数据挖掘技术中最庞大的一类算法家族。我们前面介绍过的很多算法（例如 SVM，朴素贝叶斯等）都可以用来解决分类问题。作为本文的开始，我们首先来简单回顾一下什么是分类。 假设我们现在有如下表所示的一个属性集（feature set），它收集了几个病患的症状和对应的病症。症状包括： 头疼的程度 咳嗽的程度 体温 咽喉是否肿痛 病症（Cold、Flu） Headache Cough Temperature Score Diagnosis severe mild high yes Flu no severe normal yes Cold mild mild normal yes Flu mild no normal no Cold severe severe normal yes Flu 分类问题的本质就是当给定这样一个数据集后，要求我们训练出（或建立）一个模型 $f$。当出现一组新的特征向量时，要求我们预测（或判断）拥有这样一组特征向量的对象应当属于哪个类别。假设你是一名医生，现在收治了一位新的病患，然后你通过问诊得知他的一些症状（包括头疼的程度、咳嗽的程度、体温以及咽喉是否肿痛），然后你就要根据你已经建立好的模型来判断该病人得的到底是 Cold（普通感冒）还是 Flu（流行性感冒）。 分类问题的类别数目可以是两类也可以是多类。二分类问题是最简单的分类问题，而多分类问题模型可以在二分类模型的基础上进行构建。 $\\S$ 2 $ $ 决策树基础决策树是一种用于对实例进行分类的树形结构。决策树由节点（node） 和有向边（directed edge） 组成。节点的类型有两种：内部节点和叶子节点。 内部节点表示一个特征或属性的测试条件（用于分开具有不同特性的记录） 叶子节点表示一个分类。 一旦我们构造了一个决策树模型，以它为基础来进行分类将是非常容易的。具体做法是： 从根节点开始，对实例的某一特征进行测试，根据测试结构将实例分配到其子节点（也就是选择适当的分支） 沿着该分支可能达到叶子节点或者到达另一个内部节点时，那么就使用新的测试条件递归执行下去，直到抵达一个叶子节点 当到达叶子节点时，我们便得到了最终的分类结果。 下图是一个决策树的示例（注意我们仅用了两个特征就对数据集中的 $5$ 个记录实现了准确的分类）： $\\S$ 3 $ $ Hunt 算法$\\S$ 3.1 $ $ 理论Hunt 算法是一种采用局部最优策略的决策树构建算法，它同时也是许多决策树算法的基础，包括 ID3、C4.5 和 CART 等。该算法的具体执行步骤如下：在Hunt 算法中，通过将训练记录相继划分成较纯的子集，以递归方式建立决策树。设 $D_t$ 是与结点 $t$ 相关联的训练记录集，而 $y=\\{y_1,y_2,\\cdots,y_c\\}$ 是类标号，Hunt 算法的递归定义如下： 如果 $D_t$ 中所有记录都属于同一个类，则 $t$ 是叶结点，用 $y_t$ 标记 如果 $D_t$ 中包含属于多个类的记录，则选择一个属性测试条件（attribute test condition），将记录划分成较小的子集。对于测试条件的每个输出，创建一个子女结点，并根据测试结果将 $D_t$ 中的记录分布到子女结点中。然后，对于每个子女结点，递归地调用该算法 $\\S$ 3.2 $ $ 例子预测贷款申请者是会按时归还贷款，还是会拖欠贷款。对于这个问题，训练数据集可以通过考察以前贷款者的贷款记录来构造。在下图所示的例子中，每条记录都包含贷款者的个人信息，以及贷款者是否拖欠贷款的类标号。 Tid 有房者 婚姻状况 年收入 拖欠贷款者 1 是 单身 125K 否 2 否 已婚 100K 否 3 否 单身 70K 否 4 是 已婚 120K 否 5 否 离异 95K 是 6 否 已婚 60K 否 7 是 离异 220K 否 8 否 单身 85K 是 9 否 已婚 75K 否 10 否 单身 90K 是 &lt;/center &gt; 该分类问题的初始决策树只有一个结点。 类标号为“拖欠货款者＝否”（见图 $(a)$），意味大多数贷款者都按时归还贷款 然而，该树需要进一步的细化，因为根结点包含两个类的记录。根据“有房者”测试条件，这些记录被划分为较小的子集，如图 $(b)$所示 接下来，对根结点的每个子女递归地调用 Hunt 算法。从下图给出的训练数据集可以看出，有房的贷款者都按时偿还了贷款，因此，根结点的左子女为叶结点，标记为“拖欠货款者=否”（见图$(b)$) 对于右子女，我们需要继续递归调用 Hunt 算法，直到所有的记录都属于同一个类为止。每次递归调用所形成的决策树显示在图 $(c)$和图 $(d)$中。 $\\S$ 3.3 $ $ 总结如果属性值的每种组合都在训练数据中出现，并且每种组合都具有唯一的类标号，则 Hunt 算法是有效的。但是对于大多数实际情况，这些假设太苛刻了，因此，需要附加的条件来处理以下的情况： 算法的第二步所创建的子女结点可能为空，即不存在与这些结点相关联的记录。如果没有一个训练记录包含与这样的结点相关联的属性值组合，这种情形就可能发生。这时，该结点成为叶结点，类标号为其父结点上训练记录中的多数类 在第二步，如果与 $D_t$ 相关联的所有记录都具有相同的属性值（目标属性除外），则不可能进一步划分这些记录。在这种情况下，该结点为叶结点，其标号为与该结点相关联的训练记录中的多数类。 此外，在上面这个算法过程中，依据什么原则来选取属性测试条件，例如为什第一次选择“有房者”来作为测试条件。事实上，如果我们选择的属性测试条件不同，那么对于同一数据集来说所建立的决策树可能相差很大。如下图所示为基于前面预测病人是患了 Cold 还是 Flu 的数据集所构建出来的另外两种情况的决策树： 事实上，在构建决策树时我们需要关心的问题包括： 如何建立最优决策树 如何在每个决策点（节点）选择属性值 如何选择每个节点的分支数和分区数据的属性值 什么时候停止树的生长 $\\S$ 4 $ $ Gini 测度与划分构建一棵最优的决策树只能采用一些启发式策略来解决： 选择一个属性来分割节点上的数据，使得每个分区尽可能是同类的。这意味着我们希望看到每个分区中的大多数实例属于尽可能少的类，并且每个分区都应该尽可能大 如果所有叶节点主要由单个类（即叶节点几乎是纯的）支配，我们可以停止树的生长 如何评估节点的不纯度（Impurity）？通常可以使用的指标有如下三个（实际应用时，只要选其中一个即可） 基尼指数（Gini Index） 熵（Entropy） 误分类误差（Misclassification error） 第一个可以用来评估节点不纯度的指标是 Gini 系数。对于一个给定的节点 $t$，它的 Gini 系数计算公式如下： Gini(t)=1-\\sum_j[p(j\\ |\\ t)]^2 $p(j | t)$ 表示给定节点 $t$ 中属于类 $j$ 的记录所占的比例。通过这个计算公式你可以看出： 基尼指数的最大值为 $(1-\\dfrac{1}{n_c})$ 当记录在所有类中均匀分布时，意味着分类是最不纯的 当所有记录属于一个类时，最小值是 $0$，这意味着分类是最纯的 选择最佳划分的度量通常是根据划分后子女结点不纯性的程度。不纯的程度越低，类分布就越倾斜。例如，类分布为 $(0, 1)$ 的结点具有零不纯性，而均衡分布 $(0.5, 0.5)$ 的结点具有最高的不纯性。现在我们回过头来看一个具体的计算例子。现在我们一共有 $6$ 个记录，以二元分类问题不纯性度量值的比较为例，下图的意思表示有四个节点，然后分别计算了每一个节点的 $Gini$ 系数值： 从上面的例子可以看出，第一个结点，具有最低的不纯性度量值，接下来节点的不纯度度量值依次递增。为了确定测试条件的效果，我们需要比较父结点（划分前）的不纯程度和子女结点（划分后） 的不纯程度，它们的差越大，测试条件的效果就越好。增益 $\\Delta$ 是一种可以用来确定划分效果的标准： \\Delta=I(parent)-\\sum^k_{j=1}\\frac{N(v_j)}{N}I(v_j) $I(\\cdot)$ 是给定结点的不纯性度量，$N$ 是父结点上的记录总数，$k$ 是属性值的个数，$N(v_j)$ 是与子女结点 $v_j$ 相关联的记录个数 决策树构建算法通常选择最大化增益 $\\Delta$ 的测试条件，因为对所有的测试条件来说，$I(parent)$ 是一个不变的值，所以最大化增益等价于最小化子女结点的不纯性度量的加权平均值 考虑下面这个划分的例子。假设有两种方法将数据划分成较小的子集。划分前，Gini 系数等于 $0.5$，因为属于两个类（ $C0$ 和 $C1$）的记录个数相等。 如果选择属性 $A$ 来划分数据，节点 $N_1$ 的 Gini 系数为 $1−(4/7)^2−(3/7)^2=0.4898$，$N_2$ 的 Gini 系数为 $1−(2/5)^2−(3/5)^2=0.48$ 属性 $A$ 的 Gini 系数的加权平均为 $(7/12)×0.4898+(5/12)×0.48=0.486$ 同理，我们还可以计算属性 $B$ 的 Gini 系数的加权平均为 $(7/12)×0.408+(5/12)×0.32=0.371$ 因为属性 $B$ 具有更小的 Gini 系数，所以它比属性 $A$ 更可取 $\\S$ 4.1 $ $ 考虑多分类的情况标称属性可以产生二元划分也可以产生多路划分，如下图所示。 二元划分的 Gini 系数的计算与二元属性类似。 对于车型属性第一种二元分类，$Gini($ $\\{$家用，豪华$\\}$ $)=0.4922$，而 $Gini($ $\\{$家用$\\}$ $)=0.375$。这个划分的 Gini 系数加权平均是： (16/20)\\times 0.4922+(4/20)\\times0.375=0.468 类似地，对第二种二元划分 $\\{$运动$\\}$ 和$\\{$家用，豪华$\\}$， Gini 系数加权平均是 $0.167$ 第二种划分的 Gini 系数相对更低，因为其对应的子集的纯度更高。 对于多路划分，需要计算每个属性值的 Gini 系数。 $Gini($ $\\{$家用$\\}$ $)=0.375$，$Gini($ $\\{$运动$\\}$ $)=0$，$Gini($ $\\{$豪华$\\}$ $)=0.219$，所以多路划分的 Gini 系数加权平均值为： (4/20)\\times 0.375+(8/20)\\times 0+(8/20)\\times 0.219=0.163 多路划分的 Gini 系数比两个二元划分都小。这是因为二元划分实际上合并了多路划分的某些输出，自然降低了子集的纯度。 $\\S$ 4.2 $ $ 考虑特征值连续的情况考虑下图所示的例子，其中测试条件 “年收入$\\le \\upsilon$” 用来划分拖欠贷款分类问题的训练记录。 用穷举法确定 $\\upsilon$ 的值，将 $N$ 个记录中所有的属性值都作为候选划分点 对每个候选 $\\upsilon$，都要扫描一次数据集，统计年收入大于和小于 $\\upsilon$ 的记录数，然后计算每个候迭的 Gini 系数，并从中选择具有最小值的候选划分点 这种方法的计算代价显然是高昂的，因为对每个候选划分点计算 Gini 系数需要 $O(N)$ 次操作，由于有 $N$ 个候选，总的计算复杂度为 $O(N^2)$ 为了降低计算复杂度 按照年收入将训练记录排序，所需要的时间为 $O(N\\log N)$ ，从两个相邻的排过序的属性值中选择中间值作为候选划分点，得到候选划分点$55$， $65$， $72$等 无论如何，与穷举方法不同，在计算候选划分点的 Gini 指标时，不需考察所有 $N$ 个记录 对第一个候选 $\\upsilon=55$ 没有年收入小于 $55K$ 的记录，所以年收入$＜55K$ 的派生结点的 Gini 系数是 $0$ 另一方面，年收入$\\ge 55K$ 的样本记录数目分别为 $3$（类 Yes）和$7$（类 No)。如此一来，该结点的 Gini 系数是 $0.420$。该候选划分的 Gini 系数的加权平均就等于 $0×0+1×0.42=0.42$ 对第二个候选 $\\upsilon=65$ 通过更新上一个候选的类分布，就可以得到该候选的类分布。更具体地说，新的分布通过考察具有最低年收入（即 $60K$）的记录的类标号得到。因为该记录的类标号是 No 所以类 No 的计数从 $0$ 增加到 $1$（对于年收入$\\le 65K$），和从 $7$ 降到$6$（对于年收入 $&gt;65K$），类 Yes 的分布保持不变。新的候选划分点的加权平均 Gini 系数为 $0.4$ 重复这样的计算，直到算出所有候选的 Gini 系数值 最佳的划分点对应于产生最小 Gini 系数值的点，即 $\\upsilon=97$。该过程代价相对较低，因为更新每个候选划分点的类分布所需的时间是一个常数 该过程还可以进一步优化：仅考虑位于具有不同类标号的两个相邻记录之间的候选划分点 例如，因为前三个排序后的记录（分别具有年收入 $60K$、 $70K$ 和 $75K$)具有相同的类标号，所以最佳划分点肯定不会在 $60K$和 $75K$ 之间，因此，候选划分点 $\\upsilon= 55K$、 $65K$、 $72K$、 $87K$、 $92K$、 $110K$、 $122K$、 $172K$ 和 $230K$ 都将被忽略，因为它们都位于具有相同类标号的相邻记录之间。该方法使得候选划分点的个数从 $11$ 个降到 $2$ 个 $\\S$ 5 $ $ 信息熵与信息增益在信息论中，熵是表示随机变量不确定性的度量。熵的取值越大，随机变量的不确定性也越大。设 $X$ 是一个取有限个值的离散随机变量，其概率分布为： P(X=x_i)=p_i,\\ i=1,2,\\cdots,n则随机变量 $X$ 的熵定义为 H(X)=-\\sum^n_{i=1}p_i\\log p_i在上式中，如果 $p_i=0$，则定义 $0\\log0=0$。通常，上式中的对数以 $2$ 为底或以 $e$为底，这时熵的单位分别是比特（bit）或纳特（nat）。由定义可知，熵只依赖于 $X$ 的分布，而与 $X$ 的取值无关，所以也可以将 $X$ 的熵记作 $H(p)$，即 H(p)=-\\sum^n_{i=1}p_i\\log p_i条件熵 $H(Y|X)$ 表示在已知随机变量 $X$ 的条件下随机变量 $Y$ 的不确定性，随机变量 $X$ 给定的条件下随机变量 $Y$ 的条件熵（conditional entropy）$H(Y|X)$，定义为 $X$ 给定条件下 $Y$ 的条件概率分布的熵对 $X$ 的数学期望： H(Y|X)=\\sum^n_{j=1}P(X=x_j)H(Y|X=x_j)就我们当前所面对的问题而言，如果给定一个节点 $t$，它的（条件）熵计算公式如下： Entropy(t)=-\\sum_jp(j\\ |\\ t)\\log p(j\\ |\\ t)其中，$p(j | t)$ 表示给定节点 $t$ 中属于类 $j$ 的记录所占的比例。通过这个计算公式你可以看出： 最大值（$\\log n_c$）当记录在所有类别中均匀分布时，意味着最少的信息 最小（$0$）当所有记录属于一个类时，意味着大部分信息 还是来看一个具体的计算例子，如下图所示（基本情况与前面介绍 Gini 系数时的例子类似，我们不再赘述）： 以此为基础，我们要来定义信息增益（Information Gain） 如下： GAIN = Entropy(p)-\\big[\\sum^k_{i=1}\\frac{n_i}{n}Entropy(i)\\big] 父节点中 $p$ 被分成 $i$ 个部分 $n_i$ 是 第 $i$ 部分的记录数 使用信息增益的缺点在于：信息增益的大小是相对于训练数据集而言的。在分类问题困难时，即训练数据集的经验熵比较大时，信息增益会偏大。反之，信息增益会偏小。 使用信息增益比（Information gain ratio） 可以对这一问题进行校正。 SplitINFO=-\\sum^k_{i=1}\\frac{n_i}{n}\\log\\frac{n_i}{n}GainRatio_{split}=\\frac{GAIN}{SplitINFO}于是，更高熵分区（大量小分区）受到惩罚！ $\\S$ 6 $ $ 分类误差给定一个节点 $t$，它的分类误差定义为： Error(t)=1-\\max_iP(i\\ |\\ t)由此公式可知： 最大值（$1-\\dfrac{1}{n_c}$）当记录在所有类中均匀分布时，意味着信息越不纯 最小（$0$）当所有记录属于一个类时，意味着大部分信息 一个简单的算例： 下图给出了二分类模型中，熵、Gini 系数、分类误差的比较情况。如果我们采用二分之一熵 $\\dfrac{1}{2}H(p)$ 的时候，你会发现它与 Gini 系数将会相当接近。 我们最后再来看一个 Gini 系数和分类误差对比的例子： 来计算一下加权平均的 Gini 系数： Gini(N1) = 1 – (3/3)^2 – (0/3)^2 = 0 \\\\ Gini(N2) = 1 – (4/7)^2 – (3/7)^2 = 0.489 \\\\ Gini(Children) = (3/10) \\times 0 + (7/10) \\times 0.489= 0.342再来计算一下分类误差： MissClass(N1) = 1 –(3/3) = 0\\\\ MissClass(N2) = 1 – 4/7 = 3/7\\\\ MissClass =(3/10)\\times 0+(7/10)\\times(3/7)=0.3可见在这个例子中，Gini 指标提升了，然而分类误差未变。 $\\S$ 7 $ $ ID3 算法ID3 算法的核心是在决策树各个结点上应用信息增益准则选择特征，递归地构建决策树。 具体方法是： 从根结点（root node） 开始，对结点计算所有可能的特征的信息增益，选择信息增益最大的特征作为结点的特征，由该特征的不同取值建立子结点 再对子结点递归地调用以上方法，构建决策树 直到所有特征的信息增益均很小或没有特征可以选择为止，最后得到一棵决策树 ID3 相当于用极大似然法进行概率模型的选择。 下面我们给出一个更加正式的 ID3 算法的描述： 输入：训练数据集 $D$，特征集 $A$，阈值 $\\epsilon$输出：决策树 $T$ 若 $D$ 中所有实例属于同一类 $C_k$，则 $T$ 为单结点树，并将类 $C_k$ 作为该结点的类标记，返回 $T$； 若 $A=\\varnothing$，则 $T$ 为单结点树，并将 $D$ 中实例数最大的类 $C_k$ 作为该结点的类标记，返回 $T$ 否则，计算 $A$ 中各特征对 $D$ 的信息增益，选择信息增益最大的特征 $A_g$ 如果 $A_g$的信息增益小于阈值 $\\epsilon$ ，则置 $T$ 为单结点树，并将 $D$中实例数最大的类 $C_k$ 作为该结点的类标记，返回 $T$ 否则，对 $A_g$ 的每一可能值 $a_i$ ，依 $A_g=a_i$ 将 $D$ 分割为若干非空子集 $D_i$，将 $D_i$ 中实例数最大的类作为标记，构建子结点，由结点及其子结点构成树 $T$，返回 $T$ 对第 $i$ 个子结点，以 $D_i$ 为训练集，以 $A−{A_g}$ 为特征集，递归地调用步骤 $(1)$ 至 $(3)$，得到子树 $T_i$ ，返回 $T_i$ 下面我们来看一个具体的例子，我们的任务是根据天气情况计划是否要外出打球： Day Outlook Temperature Humidity Wind play ball D1 Sunny Hot High Weak No D2 Sunny Hot High Strong No D3 Overcast Hot High Weak Yes D4 Rainy Mild High Weak Yes D5 Rainy Cool Normal Weak Yes D6 Rainy Cool Normal Strong No D7 Overcast Cool Normal Strong Yes D8 Sunny Mild High Weak No D9 Sunny Cool Normal Weak Yes D10 Rainy Mild Normal Weak Yes D11 Sunny Mild Normal Strong Yes D12 Overcast Mild High Strong Yes D13 Overcast Hot Normal Weak Yes D14 Rainy Mild High Strong No 首先来算一下根节点的熵：$$ \\begin{align*} Entropy(Play Ball)&=Entropy(5,9)\\\\ &=Engropy(0.36,0.64)\\\\ &=-(0.36\\log_20.36)-(0.64\\log_20.64)\\\\ &=0.94 \\end{align*} $$ 然后再分别计算每一种划分的信息熵，比方说我们选择 Outlook 这个特征来做划分，那么得到的信息熵为 table,table tr th, table tr td {border:1px solid #ddd;} Play ball Yes No Outlook Sunny 3 2 5 Overcast 4 0 4 Rainy 2 3 5 14 $$ \\begin{align} \\mathbb{E}(Play\\ ball,Outlook)&=P(Sunny)\\cdot \\mathbb{E}(3,2)+P(Overcast)\\cdot \\mathbb{E}(4,0)+P(Rainy)\\cdot \\mathbb{E}(2,3)\\\\ &=\\frac{5}{14}\\times 0.971+\\frac{4}{14}\\times 0.0+\\frac{5}{14}\\times 0.971\\\\ &=0.693 \\end{align} $$ 据此可计算采用 Outlook 这个特征来做划分时的信息增益为： $$ \\begin{align} G(Play\\ ball, Outlook)&=\\mathbb{E}(Play\\ ball)-\\mathbb{E}(Play\\ ball, Outlook)\\\\ &=0.94-0.693\\\\ &=0.247 \\end{align} $$ Play ball Yes No Temp. Sunny 2 2 Overcast 4 2 Rainy 3 1 Gini=0.029 Play ball Yes No Windy False 6 2 True 3 3 Gini=0.048 取其中具有最大信息增益的特征来作为划分的标准，然后你会发现其中一个分支的熵为零（时间中阈值可以设定来惩罚过拟合），所以把它变成叶子，即得 对于其他熵不为零（或者大于预先设定的阈值）的分支，那么则需要做进一步的划分 根据上述的规则继续递归地执行下去。最终，我们得到了如下一棵决策树。 $\\S$ 8 $ $ C4.5 算法C4.5 算法与 ID3 算法相似，C4.5 算法是由 C4.5 算法演进而来的。C4.5 在生成的过程中，用信息增益比来选择特征。下面我们给出一个更加正式的 C4.5 算法的描述： 输入：训练数据集 $D$，特征集 $A$，阈值 $\\epsilon$输出：决策树 $T$ 若 $D$ 中所有实例属于同一类 $C_k$，则 $T$ 为单结点树，并将类 $C_k$ 作为该结点的类标记，返回 $T$； 若 $A=\\varnothing$，则 $T$ 为单结点树，并将 $D$ 中实例数最大的类 $C_k$ 作为该结点的类标记，返回 $T$ 否则，计算 $A$ 中各特征对 $D$ 的信息增益比，选择信息增益比最大的特征 $A_g$ 如果 $A_g$的信息增益比小于阈值 $\\epsilon$ ，则置 $T$ 为单结点树，并将 $D$中实例数最大的类 $C_k$ 作为该结点的类标记，返回 $T$ 否则，对 $A_g$ 的每一可能值 $a_i$ ，依 $A_g=a_i$ 将 $D$ 分割为若干非空子集 $D_i$，将 $D_i$ 中实例数最大的类作为标记，构建子结点，由结点及其子结点构成树 $T$，返回 $T$ 对第 $i$ 个子结点，以 $D_i$ 为训练集，以 $A−{A_g}$ 为特征集，递归地调用步骤 $(1)$ 至 $(3)$，得到子树 $T_i$ ，返回 $T_i$ $\\S$ 9 $ $ CART 算法分类回归树(classification and regression tree，CART) 同样由特征选择、树的生成以及剪枝组成，既可以用于分类也可以用于回归。同样属于决策树的一种。 $\\S$ 9.1 $ $ 算法思想CART 算法采用的是一种二分递归分割的技术，将当前样本分成两个子样本集，使得生成的非叶子节点都有两个分支。因此 CART 实际上是一颗二叉树。 CART 树的特点： CART 是一颗二叉树 CART 既是分类树又是回归树 当 CART 是分类树的时候，采用 Gini 值作为分裂节点的依据，当 CART 作为回归树的时候，使用样本的最小方差作为分裂节点的依据 $\\S$ 9.2 $ $ 回归树的生成$\\S$ 9.2.1 $ $ 最小二乘法回归树生成算法输入：训练数据集 $D$输出：回归树 $f(x)$ 在训练数据集所在的输入空间中，递归得将每一个区域划分为两个子区域并决定每个子区域上的输出值，构建二叉决策树： 选择最优切分变量 $j$ 和切分点 $s$，求解： \\min_{j,s}\\big[\\min_{c_1}\\sum_{x_i\\in R_1(j,s)}(y_i-c_1)^2+\\min_{c_2}\\sum_{x_i\\in R_2(j,s)}(y_i-c_2)^2\\big] 遍历变量 $j$，对固定的切分变量 $j$ 扫描切分点 $s$，选择使上式达到误差最小的变量 $(j,s)$，其中 $R_1$ 和 $R_2$ 表示的是划分之后的空间。 用选定的 $(j,s)$ 划分区域并决定响应的输出值 R_1(j,s)=\\{x^{(j)}\\}\\leq s,\\quad R_2(j,s)=\\{x|x^{(j)}>s\\} c_m=\\frac{1}{N_m}\\sum_{x_i\\in R_m(j,s)}y_i,\\quad x\\in R_m,m=1,2 继续对两个子区域调用步骤 $(1)$，$(2)$，直到满足停止条件 将输入空间划分为 $M$ 个区域 $\\{R_1,R_2,R_3,\\cdots\\,R_M\\}$，生成决策树： f(x)=\\sum_{m=1}^Mc_mI(x\\in R_m) 下面我们举出一个例子方便理解： 看电视时长 婚姻状况 职业 年龄 3 未婚 学生 12 4 未婚 学生 18 2 已婚 老师 26 5 已婚 上班族 47 2.5 已婚 上班族 36 3.5 未婚 老师 29 4 已婚 学生 21 下面我们将利用上面的数据对年龄进行预测。 首先将 $j$ 的属性选为职业，则有三种划分情况： $\\{$“老师”，“学生”$\\}$、$\\{$“上班族”$\\}$ $\\{$“老师”，“上班族”$\\}$、$\\{$“学生”$\\}$ $\\{$“学生”，“上班族”$\\}$、$\\{$“老师”$\\}$ 第一种情况 $R_1 =\\{$“学生”$\\}$，$R_2=\\{$“老师”，”上班族”$\\}$&lt;/div&gt; 此时有 c_1=\\frac{12+18+21}{3}=17\\\\ c_2=\\frac{26+47+36+29}{4}=34.5\\\\ m=\\min\\big[\\sum_{y_i\\in R_1}(y_i-c_1)^2+\\min\\sum_{y_i\\in R_2}(y_i-c_2)^2\\big] 其中 $y_i\\in (\\{12,18,21\\},\\{26,47,36,29\\})$ 最小平方误差计算得: m=42+261=303 当 $R_1 =\\{$“老师”$\\}$，$R_2=\\{$“学生”，”上班族”$\\}$&lt;/div&gt; c_1=27.5,\\quad c_2=26.5\\\\ m=4.5+738.16=742.66 当划分情况为 $R_1 =\\{$“上班族”$\\}$，$R_2=\\{$“学生”，”老师”$\\}$&lt;/div&gt; c_1=41.5,\\quad c_2=21.2\\\\ m=60.5+178.8=238.8根据上面的计算得到第三种划分方式误差最小。因此此时的决策树为： f(x)=\\left\\{ \\begin{array}{rcl} 41.5 & & \\{\"上班族\"\\}\\\\ 21.2 & & \\{\"老师\",\"学生\"\\}\\\\ \\end{array} \\right.这只是一个特征情况下的分类，按照同样的方法对其他特征情况进行划分计算。找到最合适的划分点。 $\\S$ 9.3 $ $ 分类树的生成分类树是用 Gini 指数选择最优特征，同时决定该特征的最优二值切分点。 $\\S$ 9.3.1 $ $ 分类树生成算法输入：训练数据集 $D$，停止计算的条件输出：CART 决策树具体步骤: 计算现有特征对该数据集的基尼指数，对于每一个特征 $A$，可以对样本点 $A$ 是否为 $a$ 可以将数据集 $D$ 分成数据集 $D1$，$D2$ 对于所有的特征A和所有可能的切分点 $a$，选择基尼指数最小的特征以及相对应的切分点作为最优特征和最佳切分点 对最优子树递归调用 $(1)$$(2)$，直到满足停止条件 生成 CART 分类树。 还是基于前面的三种划分情况来预测是否已婚。以上面的第一种情况为例 $R_1 =\\{$“学生”$\\}$，$R_2=\\{$“老师”，”上班族”$\\}$&lt;/div&gt; Gini(D,A)=\\sum_{i=1}^k=p_iGini(D_i)所以有 Gini(D,A)=\\frac{3}{7}\\big(1-(\\frac{1}{3})^2-(\\frac{2}{3})^2\\big)+\\frac{4}{7}\\big(1-(\\frac{3}{4})^2-(\\frac{1}{4})^2\\big)=\\frac{17}{42}同理可以求其他两种方式。所以我们只需要在其中选择 Gini 指数最小的情况。 $\\S$ 7.4 $ $剪枝处理剪枝是决策树学习算法中对付过拟合的主要手段。主要是从已生成的树中剪掉一些子树或者叶子节点，并将根节点或者父节点作为新的叶子节点，从而简化分类树模型。决策树的剪枝往往是通过极小化决策树的整体损失函数或者代价函数。设树T的叶子节点数为 $|T|$，叶子节点 $t$ 上有 $N_t$ 个样本点，其中 $k$ 类的样本点数为 $N_{kt}$，$H_t(T)$ 为结点 $t$ 上的经验熵，$\\alpha\\ge 0 $为参数，所以损失函数定义为： C_{\\alpha}(T)=\\sum_{t=1}^{|T|}N_tH_t(T)+\\alpha|T| 其中经验熵为 H_t(T)=-\\sum_{k}\\frac{N_{tk}}{N_t}\\log\\frac{N_{tk}}{N_t} 此时令 C(T)=-\\sum_{t=1}^{|T|}\\sum_{k=1}^{K}N_{tk}\\log\\frac{N_{tk}}{N_t}所以： C_{\\alpha}(T)=C(T)+\\alpha|T| $C(T)$ 表示对训练数据的预测误差 $|T|$ 表示模型的复杂度 损失函数其实正好表达了两者的平衡。 所以决策树生成的具体流程： 计算每一个结点的经验熵 $T_{\\alpha}$ 递归的从叶子节点开始往上遍历，减掉叶子节点，然后判断损失函数的值是否减少，如果减少，则将父节点作为新的叶子节点。 重复$(2)$，直到完全不能剪枝。","categories":[{"name":"算法","slug":"算法","permalink":"http://yoursite.com/categories/算法/"}],"tags":[{"name":"分类","slug":"分类","permalink":"http://yoursite.com/tags/分类/"},{"name":"信息增益","slug":"信息增益","permalink":"http://yoursite.com/tags/信息增益/"},{"name":"剪枝","slug":"剪枝","permalink":"http://yoursite.com/tags/剪枝/"}]},{"title":"SVM 算法","slug":"SVM-算法","date":"2018-06-01T15:58:19.000Z","updated":"2018-07-28T16:14:45.782Z","comments":true,"path":"2018/06/01/SVM-算法/","link":"","permalink":"http://yoursite.com/2018/06/01/SVM-算法/","excerpt":"","text":"SVM 算法$\\S$ 1 $ $ Logistic回归$\\S$ 1.1 $ $ 原理给定一些数据点，它们分别属于两个不同的类，现在要找到一个线性分类器把这些数据分成两类。如果用 $\\boldsymbol{x}$ 表示数据点，用 $\\boldsymbol{y}$ 表示类别（ $\\boldsymbol{y}$ 可以取 $1$ 或者 $-1$ ，分别代表两个不同的类），一个线性分类器的学习目标便是要在 $n$ 维的数据空间中找到一个超平面（hyper plane），这个超平面的方程可以表示： \\omega ^T\\boldsymbol{x} + b = 0Logistic回归目的是从特征学习出一个 $0/1$ 分类模型，而这个模型是将特性的线性组合作为自变量，由于自变量的取值范围是 $(-\\infty, +\\infty)$ 。因此，使用logistic函数（或称作sigmoid函数）将自变量映射到 $(0,1)$ 上，映射后的值被认为是属于 $\\boldsymbol{y}=1$ 的概率。 假设函数： h_{\\theta}(\\boldsymbol{x}) = g(\\theta^T\\boldsymbol{x}) = \\frac{1}{1+e^{-\\theta^T\\boldsymbol{x}}} 其中 $\\boldsymbol{x}$ 是 $n$ 维特征向量，函数 $g$ 就是logistic函数 而假设函数就是特征属于 $\\boldsymbol{y}=1$的概率： \\begin{align} P(y = 1\\ |\\ \\boldsymbol{x}\\ ; \\theta)&=h_{\\theta}(\\boldsymbol{x})\\\\ P(y = 0\\ |\\ \\boldsymbol{x}\\ ; \\theta)&=1-h_{\\theta}(\\boldsymbol{x}) \\end{align}从而，当我们要判别一个新来的特征属于哪个类时，只需求 $h_{\\theta}(\\boldsymbol{x})$ 即可，若大于 $0.5$ 就是 $\\boldsymbol{y}=1$ 的类，反之属于 $\\boldsymbol{y}=0$ 类。 $h_{\\theta}(\\boldsymbol{x})$ 只和 $\\theta^T\\boldsymbol{x}$ 有关，$\\theta^T\\boldsymbol{x}&gt;0$，那么 $h_{\\theta}(\\boldsymbol{x}) &gt; 0$ ，而 $g(z)$ 只是用来映射，真实的类别决定权还是在于 $\\theta^T\\boldsymbol{x}&gt;0$ 当时 $\\theta^T\\boldsymbol{x}&gt;&gt;0$ 时， $h_{\\theta}(\\boldsymbol{x}) = 1$，反之 $h_{\\theta}(\\boldsymbol{x}) = 0$ Logistic回归就是要学习得到 $\\theta$，使得正例的特征远大于 $0$ ，负例的特征远小于 $0$ 接下来，尝试把logistic回归做个变形。 首先，将使用的结果标签 $\\boldsymbol{y}=0$ 和 $\\boldsymbol{y}=1$ 替换为 $\\boldsymbol{y}=-1$ ，$\\boldsymbol{y}=1$ 然后将 $\\theta^T\\boldsymbol{x} = \\theta_0+\\theta_1x_1+\\theta_2x_2+ \\dots +\\theta_nx_n$中的 $\\theta_0$ 替换为 $b$ 最后将后面的 $\\theta_0+\\theta_1x_1+\\theta_2x_2+ \\dots +\\theta_nx_n$ 替换为 $\\omega ^T\\boldsymbol{x}$。如此，则有了 $\\omega ^T\\boldsymbol{x} + b$。 也就是说除了 $\\boldsymbol{y}$ 由 $\\boldsymbol{y}=0$ 变为 $\\boldsymbol{y}=1$ 外，线性分类函数跟logistic回归的形式化表示没区别。 进一步，可以将假设函数 $h_{\\omega,b}(\\boldsymbol{x}) = g(\\omega ^T\\boldsymbol{x} + b )$ 中的 $g(z)$ 做一个简化，将其简单映射到 $\\boldsymbol{y}=-1$ 和 $\\boldsymbol{y}=1$ 上。映射关系如下： \\begin{equation} g(z)=\\left \\{ \\begin{array}{lr} 1, &z\\ge 0\\\\ -1, &z","categories":[{"name":"算法","slug":"算法","permalink":"http://yoursite.com/categories/算法/"}],"tags":[{"name":"对偶","slug":"对偶","permalink":"http://yoursite.com/tags/对偶/"},{"name":"拉格朗日乘子","slug":"拉格朗日乘子","permalink":"http://yoursite.com/tags/拉格朗日乘子/"},{"name":"核函数","slug":"核函数","permalink":"http://yoursite.com/tags/核函数/"}]},{"title":"GMM 算法","slug":"GMM-算法","date":"2018-05-01T04:47:34.000Z","updated":"2018-07-28T15:54:41.973Z","comments":true,"path":"2018/05/01/GMM-算法/","link":"","permalink":"http://yoursite.com/2018/05/01/GMM-算法/","excerpt":"","text":"GMM 算法$\\S$ 1 $ $ 单一多维高斯的参数估计假设一组 $d$ 维度的点， $i=1,2,3\\dots n$ ，如果这些点的分布近似椭圆球形，那么我们可以使用高斯密度函数进行刻画： $$ \\mathcal{N}(\\boldsymbol{x}\\ ;\\mu, \\Sigma)=\\dfrac{1}{ {(2\\pi)}^{\\frac{d}{2} }\\big|\\Sigma\\big|^{\\frac{1}{2} }}e^{-\\frac{1}{2}(\\boldsymbol{x}-\\mu)^T\\Sigma^{-1}(\\boldsymbol{x}-\\mu)} $$ 其中： $\\mu$ 为中心点，$\\Sigma$ 代表此密度函数的协方差矩阵，这些参数决定了函数形状的中心，宽幅，走向等等。 注释：协方差矩阵，分别为 $m$ 与 $n$ 个标量元素的列向量随机变量 $X$ 与 $Y$ ，二者对应的期望值分别为 $\\mu$ 与 $\\nu$，这两个变量之间的协方差定义为 $m×n$ 矩阵 最佳的用来描述这些点的参数值的计算方法，可以采用概率论中的极大似然估计（MLE，Maximum Likelihood Estimation） 来计算。在上述概率密度分布函数下，假设 $X_i$ 为相互独立的事件，那么发生 $X=\\{x_1,x_2,x_3\\dots x_n\\}$ 的概率密度为： $$ \\mathcal{p}(\\boldsymbol{X}\\ ;\\mu, \\Sigma)=\\prod_{i=1}^{n}\\mathcal{N}(\\boldsymbol{x}_i\\ ;\\mu, \\Sigma) $$ 由于 $X$ 已经发生，因此我们只需要找出 $\\mu$ 和 $\\Sigma$ 即可使得 $\\mathcal{p}(\\boldsymbol{X}\\ ;\\mu, \\Sigma)$ 有最大值。使用极大似然估计，转化到计算 $\\mathcal{J}(\\mu, \\Sigma)$ 的最大值上去 $$ \\begin{align*} \\mathcal{J}(\\mu, \\Sigma)&=\\log\\ \\mathcal{p}(\\boldsymbol{X}\\ ;\\mu, \\Sigma)\\\\ &=\\log\\ \\Bigg[\\prod_{i=1}^{n}\\mathcal{N}(\\boldsymbol{x}_i\\ ;\\mu, \\Sigma)\\Bigg]\\\\ &=\\sum_{i=1}^{n}\\log\\ \\mathcal{N}(\\boldsymbol{x}_i\\ ;\\mu, \\Sigma)\\\\ &=\\sum_{i=1}^{n}\\Bigg[-\\frac{d}{2}\\log(2\\pi)-\\frac{1}{2}\\log\\big|\\Sigma\\big|-\\frac{1}{2}(\\boldsymbol{x_i}-\\mu)^T\\Sigma^{-1}(\\boldsymbol{x_i}-\\mu) \\Bigg]\\\\ &=-\\frac{nd}{2}\\log(2\\pi)-\\frac{n}{2}\\log\\big|\\Sigma\\big|-\\frac{1}{2}\\sum_{i=1}^{n}\\Bigg[(\\boldsymbol{x_i}-\\mu)^T\\Sigma^{-1}(\\boldsymbol{x_i}-\\mu) \\Bigg] \\end{align*} $$ 想求得 $\\mu$ 的最佳结果，有最值问题可知， $\\mathcal{J}(\\mu, \\Sigma)$ 对 $\\mu, \\Sigma$ 分别计算偏导数即可： $$ \\begin{align*} \\frac{\\partial \\mathcal{J}(\\mu, \\Sigma)}{\\partial \\mu} &= -\\frac{1}{2}\\sum_{i=1}^{n}\\Bigg[-\\big(\\Sigma^{-1}+(\\Sigma^{-1})^T\\big)(\\boldsymbol{x_i}-\\mu)\\Bigg]\\\\ &=-\\frac{1}{2}\\sum_{i=1}^{n}\\Bigg[-2\\Sigma^{-1}(\\boldsymbol{x_i}-\\mu)\\Bigg]\\\\ &=\\Sigma^{-1}\\Bigg[\\sum_{i=1}^{n}\\boldsymbol{x_i}-n\\mu\\Bigg] \\end{align*} $$ 因为 $\\Sigma$ 是协方差矩阵，协方差矩阵都是对称矩阵，所以 $\\Sigma^{-1}+(\\Sigma^{-1})^T = 2\\Sigma^{-1}$ $\\dfrac{\\partial x^TAx}{\\partial x} = (A^T+A)x$ 令 $\\dfrac{\\partial \\mathcal{J}(\\mu, \\Sigma)}{\\partial \\mu} = 0$ 可得：$\\widehat{\\mu}=\\dfrac{1}{n}\\displaystyle \\sum_{i=1}^{n}\\boldsymbol{x_i}$ 此时 $\\mathcal{J}(\\mu, \\Sigma)$ 对 $\\Sigma$ 求偏导数，引入矩阵的迹 $$ \\begin{align*} \\sum_{i=1}^{n}\\Bigg[(\\boldsymbol{x_i}-\\mu)^T\\Sigma^{-1}(\\boldsymbol{x_i}-\\mu) \\Bigg]&=\\sum_{i=1}^{n}trace\\Bigg((\\boldsymbol{x_i}-\\mu)^T\\Sigma^{-1}(\\boldsymbol{x_i}-\\mu) \\Bigg)\\\\ &=\\sum_{i=1}^{n}trace\\Bigg(\\Sigma^{-1}(\\boldsymbol{x_i}-\\mu)(\\boldsymbol{x_i}-\\mu)^T \\Bigg)\\\\ &=trace\\Bigg(\\Sigma^{-1}\\sum_{i=1}^{n}(\\boldsymbol{x_i}-\\mu)(\\boldsymbol{x_i}-\\mu)^T \\Bigg) \\end{align*} $$ 两个矩阵之积的迹数满足交换率，成为循环不变性。设 $A=[a_{ij}]$ 为 $m\\times n$ 阶，$B=[b_{ij}]$ 为 $n\\times m$ 阶，则 trace(AB)=trace(BA)定义 $p\\times p$ 阶样本离差阵为： $$ \\displaystyle S=\\frac{1}{n-1}\\sum_{k=1}^n(\\mathbf{x}_k-\\overline{\\mathbf{x} })(\\mathbf{x}_k-\\overline{\\mathbf{x} })^T $$ $\\overline{\\mathbf{x} }$ 是 $\\mu$ 是最大似然估計 所以 $$ \\mathcal{J}(\\mu, \\Sigma)=\\frac{nd}{2}\\log(2\\pi)-\\frac{n}{2}\\log\\big|\\Sigma\\big|-\\frac{n-1}{2}trace(\\Sigma^{-1}S) $$ 所以 $$ \\begin{align*} \\frac{\\partial \\mathcal{J}(\\mu, \\Sigma)}{\\partial \\Sigma} &= -\\frac{n}{2}\\Sigma^{-1}+\\frac{n-1}{2}\\Sigma^{-1}S\\Sigma^{-1} \\end{align*} $$ $\\dfrac{\\partial \\log\\big|X\\big|}{\\partial X}=\\dfrac{\\partial \\log\\big|X\\big|}{\\partial x_{ij} }=\\dfrac{1}{\\big|X\\big|} \\dfrac{\\partial \\big|X\\big|}{\\partial x_{ij} }=\\dfrac{1}{\\big|X\\big|}(\\big|X\\big| (X^{-1})^T)_{ij}=(X^{-1})^T$ $\\dfrac{\\partial trace(X^{-1}A)}{\\partial X}=-(X^{-1}AX^{-1})^T$ 令 $\\dfrac{\\partial \\mathcal{J}(\\mu, \\Sigma)}{\\partial \\Sigma}=0$ 可得： $$ \\widehat{\\Sigma}=\\frac{n-1}{n}S=\\frac{1}{n}\\sum_{k=1}^n(\\mathbf{x}_k-\\overline{\\mathbf{x} })(\\mathbf{x}_k-\\overline{\\mathbf{x} })^T $$ 总结：单一多维高斯的 $\\mu$ 和 $\\Sigma$ 的参数估计为： $$ \\begin{align*} \\widehat{\\mu}&=\\dfrac{1}{n}\\displaystyle \\sum_{i=1}^{n}\\boldsymbol{x_i}\\\\ \\widehat{\\Sigma}=\\frac{n-1}{n}S&=\\frac{1}{n}\\sum_{k=1}^n(\\mathbf{x}_k-\\overline{\\mathbf{x} })(\\mathbf{x}_k-\\overline{\\mathbf{x} })^T \\end{align*} $$ $\\S$ 2 $ $ 高斯混合模型$\\S$ 2.1 $ $ 混合模型混合模型 (mixture model) 是一种描述不规则分布的机率模型。 混合模型将多个形式相同的密度函数，称为混合组件 (mixture component)，组合成一个密度函数： $$ \\displaystyle p(\\mathbf{x}\\ ;\\boldsymbol{\\Theta})=\\sum_{k=1}^m\\alpha_kp(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k) $$ 其中 $\\boldsymbol{\\Theta}=\\{\\alpha_k,\\boldsymbol{\\theta}_k\\}_{k=1}^m$ 表示混合模型的参数集合，$\\boldsymbol{\\theta}_k$ 是混合组件 $p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)$ 的参数，$\\alpha_k\\ge 0$ 是 $p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)$ 的权值，$\\displaystyle \\sum_{k=1}^m\\alpha_k=1$ 。 $$ \\displaystyle \\int p(\\mathbf{x}\\ ;\\boldsymbol{\\Theta})d\\mathbf{x}=\\sum_{k=1}^m\\alpha_k\\int p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)d\\mathbf{x}=\\sum_{k=1}^m\\alpha_k=1 $$ 高斯混合模型 (Gaussian mixture model) 可能是最常见的一种混合模型，其中混合组件为高斯密度函数 $p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)=\\mathcal{N}(\\mathbf{x}\\ ;\\boldsymbol{\\mu}_k,\\Sigma_k)$ ， $\\boldsymbol{\\theta}_k=\\{\\boldsymbol{\\mu}_k,\\Sigma_k\\}$。 给定样本 $\\mathcal{X}=\\{\\mathbf{x}_i\\}_{i=1}^n$ ，混合模型参数 $\\boldsymbol{\\Theta}$ 的似然函数定义为高斯混合模型 (Gaussian mixture model) 可能是最常见的一种混合模型，其中混合组件为高斯密度函数 $p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)=\\mathcal{N}(\\mathbf{x}\\ ;\\boldsymbol{\\mu}_k,\\Sigma_k)$ ， $\\boldsymbol{\\theta}_k=\\{\\boldsymbol{\\mu}_k,\\Sigma_k\\}$。 给定样本 $\\mathcal{X}=\\{\\mathbf{x}_i\\}_{i=1}^n$ ，混合模型参数 $\\boldsymbol{\\Theta}$ 的似然函数定义为 $$ \\displaystyle \\mathcal{L}(\\boldsymbol{\\Theta}\\ ;\\mathcal{X})=p(\\mathcal{X}\\ ;\\boldsymbol{\\Theta})=\\prod_{i=1}^np(\\mathbf{x}_i\\ ;\\boldsymbol{\\Theta})=\\prod_{i=1}^n\\sum_{k=1}^m\\alpha_kp(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}_k) $$ 计算对数， $$ \\displaystyle \\log\\mathcal{L}(\\boldsymbol{\\Theta}\\ ;\\mathcal{X})=\\log\\left\\{\\prod_{i=1}^np(\\mathbf{x}_i\\ ;\\boldsymbol{\\Theta})\\right\\}=\\sum_{i=1}^n\\log\\left\\{\\sum_{k=1}^m\\alpha_kp(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}_k)\\right\\} $$ 因为 $\\log\\mathcal{L}(\\boldsymbol{\\Theta}\\ ;\\mathcal{X})$ 包含和的对数，致使最大化的计算变得相当困难，所以引入EM算法。 $\\S$ 2.2 $ $ EM算法在混合模型中，混合组件 $p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)$ 的权重 $\\alpha_k$ 既是模型参数，也可视为第 $k$ 个混合组件被选中的概率。 设想你有 $m$ 个盒子 (混合组件)，每个盒子里面有无穷多颗球 (数据点)，其密度函数为 $p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)$ 。数据样本 $\\mathcal{X}=\\{\\mathbf{x}_i\\}_{i=1}^n$ 的产生过程如下：你闭上眼睛随机挑选一个盒子，然后从中抽出一颗球，睁开眼睛后发现你得到数据点 $\\mathbf{x}_i$ ，按此方式重复 $n$ 次。 令 $\\mathbf{z}=(z_1,\\ldots,z_m)$ 代表选出一个盒子的离散型随机向量，$z_k=1$ 且 $z_j=0$， $j\\neq k$，表示第 $k$ 个盒子被选中。 实际上，$\\mathbf{z}$ 是无法量测的随机向量，称为隐藏变量 (hidden variable)。定义第 $k$ 个混合组件被选中的概率 $p(z_k=1)=\\alpha_k$， $k=1,\\ldots,m$ 。 隐藏变量 $\\mathbf{z}$ 的概率即为： $$ \\displaystyle p(\\mathbf{z})=\\prod_{k=1}^mp(z_k=1)^{z_k}=\\prod_{k=1}^m\\alpha_k^{z_k} $$ 举例来说，$\\mathbf{z}=(1,0,\\ldots,0)$ 表示第一个盒子被选中，发生的概率是 $p(\\mathbf{z})=p(z_1=1)^1p(z_2=1)^0\\cdots p(z_m=1)^0=p(z_1=1)=\\alpha_1$ 按照这个思考模型，每个混合组件可用条件密度函数表示：$$ \\displaystyle p(\\mathbf{x}\\ |z_k=1)=p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k),~~~k=1,\\ldots,m， $$或写成$$ \\displaystyle p(\\mathbf{x}\\ |\\mathbf{z})=\\prod_{k=1}^mp(\\mathbf{x}\\ |z_k=1)^{z_k}=\\prod_{k=1}^mp(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)^{z_k} $$使用全概率公式，我们可以得到混合模型：$$ \\begin{aligned} p(\\mathbf{x}\\ ;\\boldsymbol{\\Theta})&=\\sum_{\\mathbf{z} }p(\\mathbf{x}\\ |\\mathbf{z})p(\\mathbf{z})\\\\ &=\\sum_{k=1}^mp(\\mathbf{x}\\ |z_k=1)p(z_k=1)\\\\ &=\\sum_{k=1}^m\\alpha_kp(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k) \\end{aligned} $$ 如果你知道混合模型参数 $\\boldsymbol{\\Theta}$，给定一个数据点 $\\mathbf{x}$ ，能否推测它来自哪个混合组件？也就是计算后验概率 $p(z_k=1|\\ \\mathbf{x})$？ 使用贝叶斯公式 (Bayes’ theorem) ，可得： $$ \\begin{aligned} r_{k}(\\mathbf{x})&=p(z_k=1|\\ \\mathbf{x})\\\\ &=\\frac{p(\\mathbf{x}|\\ z_k=1)p(z_k=1)}{p(\\mathbf{x})}\\\\ &=\\frac{p(\\mathbf{x}|\\ z_k=1)p(z_k=1)}{\\sum_{l=1}^mp(\\mathbf{x}|\\ z_l=1)p(z_l=1)}\\\\ &=\\frac{\\alpha_k\\,p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_k)}{\\sum_{l=1}^m\\alpha_l\\,p(\\mathbf{x}\\ ;\\boldsymbol{\\theta}_l)} \\end{aligned} $$ 后验概率 $r_k(\\mathbf{x})$ 称为责任 (responsibility) ，意思是第 $k$ 个混合组件要对给定的数据点 $\\mathbf{x}$ 的生成担负多少责任。 $r_k(\\mathbf{x})$ 具有归一性， $\\displaystyle \\sum_{k=1}^mr_k(\\mathbf{x})=\\sum_{k=1}^mp(z_k=1|\\ \\mathbf{x})=1$ 。 根据前述数据产生的模型，我们要从给定的样本 $\\mathcal{X}=\\{\\mathbf{x}_i\\}_{i=1}^n$ 反推每个盒子被选中的概率 $p(z_k=1)=\\alpha_k$ ，以及每个盒子里面球的条件密度函数 $p(\\mathbf{x}|\\ z_k=1)$ 的参数 $\\boldsymbol{\\theta}_k$，**EM** 算法 是计算混合模型参数的最大似然估计的一个有效方法。则对数似然函数： $$ \\displaystyle \\log\\mathcal{L}(\\boldsymbol{\\Theta})=\\sum_{i=1}^n\\log p(\\mathbf{x}_i\\ ;\\boldsymbol{\\Theta})=\\sum_{i=1}^n\\log\\left\\{\\sum_{k=1}^mp(\\mathbf{x}_i|\\ z_k=1)p(z_k=1)\\right\\} $$ EM 算法是一种迭代法。 假设 $\\boldsymbol{\\Theta}=\\{\\alpha_k,\\boldsymbol{\\theta}_k\\}_{k=1}^m$ 表示目前所估计出的旧混合模型参数，$\\boldsymbol{\\Theta}’=\\{\\alpha’_k,\\boldsymbol{\\theta}’_k\\}_{k=1}^m$ 表示尚待决定的新参数。 $\\mathcal{L}=\\mathcal{L}(\\boldsymbol{\\Theta})$ 代表旧模型的似然函数， $p'(\\mathbf{x}_i)=p(\\mathbf{x}_i|\\boldsymbol{\\Theta}')$ 代表新模型的密度函数。 考虑两组模型参数的对数似然函数改变量，并代入新混合模型的密度函数表达式， $$ \\begin{aligned} \\log\\mathcal{L}'-\\log\\mathcal{L}&=\\sum_{i=1}^n\\log\\frac{p'(\\mathbf{x}_i)}{p(\\mathbf{x}_i)}\\\\ &=\\sum_{i=1}^n\\log\\left\\{\\frac{\\sum_{k=1}^mp'(\\mathbf{x}_i|\\ z_k=1)p'(z_k=1)}{p(\\mathbf{x}_i)}\\right\\}\\\\ &=\\sum_{i=1}^n\\log\\left\\{\\sum_{k=1}^mp(z_k=1|\\ \\mathbf{x}_i)\\frac{p'(\\mathbf{x}_i|\\ z_k=1)p'(z_k=1)}{p(\\mathbf{x}_i)p(z_k=1|\\ \\mathbf{x}_i)}\\right\\} \\end{aligned} $$使用 Jensen 不等式，（具体参见 EM 算法），可得：$$ \\begin{aligned} \\log\\mathcal{L}'-\\log\\mathcal{L}&\\ge \\sum_{i=1}^n\\sum_{k=1}^mp(z_k=1|\\ \\mathbf{x}_i)\\log\\left\\{\\frac{p'(\\mathbf{x}_i|\\ z_k=1)p'(z_k=1)}{p(\\mathbf{x}_i)p(z_k=1|\\ \\mathbf{x}_i)}\\right\\}\\\\ &=\\sum_{i=1}^n\\sum_{k=1}^mp(z_k=1|\\ \\mathbf{x}_i)\\log\\left\\{p'(\\mathbf{x}_i|\\ z_k=1)p'(z_k=1)\\right\\}\\\\ &~~~-\\sum_{i=1}^n\\sum_{k=1}^mp(z_k=1|\\ \\mathbf{x}_i)\\log\\left\\{p(\\mathbf{x}_i)p(z_k=1|\\ \\mathbf{x}_i)\\right\\} \\end{aligned} $$ 其中不等式右边的第二项由旧模型参数 $\\boldsymbol{\\Theta}$ 固定，可视为一个常数 $c$ (包含负号)。 我们在乎的是与新模型参数 $\\boldsymbol{\\Theta}’$ 有关的第一项，于是定义$$ \\begin{aligned} Q(\\boldsymbol{\\Theta}',\\boldsymbol{\\Theta})&=\\sum_{i=1}^n\\sum_{k=1}^mp(z_k=1|\\mathbf{x}_i)\\log\\left\\{p'(\\mathbf{x}_i|z_k=1)p'(z_k=1)\\right\\}\\\\ &=\\sum_{i=1}^n\\sum_{k=1}^mp(z_k=1|\\mathbf{x}_i)\\log\\left\\{\\alpha'_k p(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}'_k)\\right\\} \\end{aligned} $$ 原本我们希望找到新参数 $\\boldsymbol{\\Theta}’$ 最大化 $\\log\\mathcal{L}'$ ，因为 $\\log\\mathcal{L}'\\ge \\log\\mathcal{L}+Q+c$ ，也就是说 $\\log\\mathcal{L}+Q+c$ 是 $\\log\\mathcal{L}'$ 的下界。 欲使 $\\log\\mathcal{L}'$ 有最大的下界，你可以设法找到 $\\boldsymbol{\\Theta}’$ 使最大化目标函数 $Q$，这比直接最大化 $\\log\\mathcal{L}'$ 容易得多，最大期望算法称之为 M─步骤 (最大─步骤)。 最大化 $Q$ 必然使得 $\\log\\mathcal{L}'$ 增大，除非 $\\log\\mathcal{L}'$ 已经抵达局部最大值 (local maximum)。 另外，所谓的 E─步骤 (期望─步骤) 是指确立目标函数 $Q(\\boldsymbol{\\Theta}’,\\boldsymbol{\\Theta})$，也就是用旧模型参数 $\\boldsymbol{\\Theta}$ 计算后验概率 $r_{ik}=r_k(\\mathbf{x}_i)=p(z_k=1|\\ \\mathbf{x}_i)，i=1,\\ldots,n，k=1,\\ldots,m$ 。 我们将估计混合模型参数的 EM 算法整理于下：初始化 $\\boldsymbol{\\Theta}^0=\\{\\alpha_k^0,\\boldsymbol{\\theta}^0_k\\}_{k=1}^m$，设 $t=0$。 重复步骤1与2直到满足收敛条件即停止 (比如 $\\log\\mathcal{L}$ 不再增大)。 E─步骤. 使用 $\\boldsymbol{\\Theta}^t=\\{\\alpha_k^t,\\boldsymbol{\\theta}^t_k\\}_{k=1}^m$ 定义 $Q(\\boldsymbol{\\Theta}’,\\boldsymbol{\\Theta}^t)$。 具体地说，计算每个样本的后验概率，对于 $i=1,\\ldots,n，k=1,\\ldots,m$： $$ r^t_{ik}=\\frac{\\alpha^t_k\\,p(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}^t_k)}{\\sum_{l=1}^m\\alpha^t_l\\,p(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}^t_l)} $$ M─步骤. 解这个优化问题： $$ \\begin{aligned} \\boldsymbol{\\Theta}^{t+1}&=\\arg\\max_{\\boldsymbol{\\Theta}'}Q(\\boldsymbol{\\Theta}',\\boldsymbol{\\Theta}^t)\\\\ &=\\arg\\max_{\\boldsymbol{\\Theta}'}\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\log\\left\\{\\alpha'_k\\,p(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}'_k)\\right\\}\\\\ &=\\arg\\max_{\\boldsymbol{\\Theta}'}\\left\\{Q_1\\left(\\{\\alpha'_k\\},\\boldsymbol{\\Theta}^t\\right)+Q_2\\left(\\{\\boldsymbol{\\theta}'_k\\},\\boldsymbol{\\Theta}^t\\right)\\right\\}\\\\ &=\\arg\\max_{\\boldsymbol{\\Theta}'}\\left\\{\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\log\\alpha'_k + \\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\log p(\\mathbf{x}_i\\ ;\\boldsymbol{\\theta}'_k)\\right\\} \\end{aligned} $$ 混合模型参数 $\\boldsymbol{\\Theta}=\\{\\alpha_k,\\boldsymbol{\\theta}_k\\}_{k=1}^m$ 区分为两类： $\\boldsymbol{\\theta}_k$ 是所采用的混合组件参数 权重 $\\alpha_k\\ge 0$ 还要满足归一条件 $\\displaystyle\\sum_{k=1}^m\\alpha_k=1$ 因此，M-步骤 可以切割为两个独立的问题： \\begin{aligned} \\{\\alpha^{t+1}_k\\}&=\\arg\\max_{\\{\\alpha'_k\\} }Q_1\\left(\\{\\alpha'_k\\},\\boldsymbol{\\Theta}^t\\right)\\\\ \\{\\boldsymbol{\\theta}^{t+1}_k\\}&=\\arg\\max_{\\{\\boldsymbol{\\theta}'_k\\} }Q_2\\left(\\{\\boldsymbol{\\theta}'_k\\},\\boldsymbol{\\Theta}^t\\right) \\end{aligned}$\\S$ 2.3 $ $ $\\alpha’_k$ 的参数估计底下说明如何利用拉格朗日乘子法解出最大化 $Q_1​$ 的最佳权重 $\\alpha’_k​$ ：$$ \\begin{array}{ll} \\hbox{max} & Q_1\\left(\\{\\alpha'_k\\},\\boldsymbol{\\Theta}^t\\right)\\\\ \\hbox{s.t.}& \\sum_{k=1}^m\\alpha'_k=1 \\end{array} $$ 定义拉格朗日函数$$ L\\left(\\{\\alpha'_k\\},\\lambda\\right)=\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\log\\alpha'_k+\\lambda\\left(\\sum_{k=1}^m\\alpha'_k-1\\right) $$其中 $\\lambda$ 是拉格朗日乘数。 求导可得 $$ \\displaystyle \\frac{\\partial L}{\\partial\\alpha'_k}=\\frac{1}{\\alpha'_k}\\sum_{i=1}^nr^t_{ik}+\\lambda $$ 设上式等于零，乘以 $\\alpha’_k$，并加总所有的 $k$，使用 $\\displaystyle\\sum_{k=1}^mr^t_{ik}=1$， $$ \\displaystyle \\lambda=\\sum_{k=1}^m\\lambda\\alpha'_k=-\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}=-n $$ 因此，最佳权重为 $$ \\displaystyle \\alpha'_k=\\frac{\\sum_{i=1}^nr^t_{ik} }{n}=\\frac{n^t_k}{n} $$ 这个结果与所采用的模型元件无关 。 $\\S$ 2.4 $ $ $\\boldsymbol{\\theta}’_k$ 的参数估计$$ \\begin{aligned} Q_2(\\{\\boldsymbol{\\mu}'_k,\\Sigma'_k\\},\\boldsymbol{\\Theta}^t) &=\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\log\\mathcal{N}(\\mathbf{x}_i\\ ;\\boldsymbol{\\mu}'_k,\\Sigma'_k)\\\\ &=\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\left(-\\frac{d}{2}\\log(2\\pi)-\\frac{1}{2}\\log|\\Sigma'_k|-\\frac{1}{2}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)^T(\\Sigma'_k)^{-1}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)\\right) \\end{aligned} $$ 计算 $Q_2$ 对 $\\boldsymbol{\\mu}’_k$ 的偏导数 $$ \\frac{\\partial Q_2}{\\partial \\boldsymbol{\\mu}'_k}=\\sum_{i=1}^nr^t_{ik}(\\Sigma'_k)^{-1}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)=(\\Sigma'_k)^{-1}\\sum_{i=1}^nr^t_{ik}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k) $$设上式为零，左乘 $\\Sigma’_k$ ，解得 $$ \\displaystyle \\boldsymbol{\\mu}'_k=\\dfrac{\\displaystyle \\sum_{i=1}^nr^t_{ik}\\mathbf{x}_i}{\\displaystyle \\sum_{i=1}^nr^t_{ik} }=\\frac{\\displaystyle\\sum_{i=1}^nr^t_{ik}\\mathbf{x}_i}{n^t_k} $$接着将 $Q_2$ 包含的二次型改写为迹数并使用循环不变性： $$ \\begin{aligned} Q_2(\\{\\boldsymbol{\\mu}'_k,\\Sigma'_k\\},\\boldsymbol{\\Theta}^t) &=\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\left(-\\frac{d}{2}\\log(2\\pi)-\\frac{1}{2}\\log|\\Sigma'_k|-\\frac{1}{2}\\hbox{trace}\\left\\{(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)^T(\\Sigma'_k)^{-1}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)\\right\\}\\right)\\\\ &=\\sum_{i=1}^n\\sum_{k=1}^mr^t_{ik}\\left(-\\frac{d}{2}\\log(2\\pi)-\\frac{1}{2}\\log|\\Sigma'_k|-\\frac{1}{2}\\hbox{trace}\\left\\{(\\Sigma'_k)^{-1}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)^T\\right\\}\\right) \\end{aligned} $$计算 $Q_2$ 对 $\\Sigma’_k$ 的偏导数 $$ \\frac{\\partial Q_2}{\\partial \\Sigma'_k}=-\\frac{1}{2}\\sum_{i=1}^nr^t_{ik}\\left((\\Sigma'_k)^{-1}-(\\Sigma'_k)^{-1}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)^T(\\Sigma'_k)^{-1}\\right) $$设上式等于零，左右同时乘以 $\\Sigma’_k$，解得 $$ \\Sigma'_k=\\frac{\\displaystyle\\sum_{i=1}^nr^t_{ik}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)^T}{\\displaystyle\\sum_{i=1}^nr^t_{ik} }=\\frac{\\displaystyle\\sum_{i=1}^nr^t_{ik}(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)(\\mathbf{x}_i-\\boldsymbol{\\mu}'_k)^T}{n^t_k} $$注：$d\\times d$ 阶样本共变异数矩阵 $\\Sigma’_k$ 为可逆的 (即正定) 一个充要条件是样本大小 $n$ 不能小于随机向量 $\\mathbf{x}$ 的维数 $d$","categories":[{"name":"算法","slug":"算法","permalink":"http://yoursite.com/categories/算法/"}],"tags":[{"name":"EM","slug":"EM","permalink":"http://yoursite.com/tags/EM/"},{"name":"高斯分布","slug":"高斯分布","permalink":"http://yoursite.com/tags/高斯分布/"},{"name":"聚类","slug":"聚类","permalink":"http://yoursite.com/tags/聚类/"}]},{"title":"Baum-Welch 算法","slug":"Baum-Welch-算法","date":"2018-04-01T04:47:34.000Z","updated":"2018-07-28T15:53:52.519Z","comments":true,"path":"2018/04/01/Baum-Welch-算法/","link":"","permalink":"http://yoursite.com/2018/04/01/Baum-Welch-算法/","excerpt":"","text":"Baum-Welch 算法目的隐马尔可夫模型 (HMM) 里有三个基本问题，第三个问题叫做： 参数估计问题是 HMM 面临的第三个问题，即给定一个观察序列 $O=O_1O_2\\dots O_T$ ，如何调节模型 $\\mu = (A,B,\\pi)$ 的参数，使得 $P(O\\,|\\,\\mu)$ 最大化： arg\\max_{\\theta}P(O_{training}\\, | \\, \\mu) 通俗解释为： 知道骰子有几种（数量），不知道每种骰子是什么，观测到很多次掷骰子的结果，想反推出每种骰子是什么 字符解释 $A$ 表示状态转移概率矩阵 $B$ 表示发射概率矩阵 $\\pi$ 表示初始状态的概率分布 $O$ 表示观察状态序列 $I$ 表示隐藏状态序列 EM 算法回顾在 EM 算法里，我们回顾了下界函数 $Q(\\theta,\\theta^{(t)}) =\\displaystyle \\sum_{i=1}^{m}\\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)})\\log p(x^{(i)},z^{(i)};\\theta)$ 以及它的推导过程，而 Baum-Welch 算法也是从一个下界函数开始的。隐马尔可夫模型 (HMM) 中，赋予 $Q_i^{(t)}(z^{(i)})$ 不一样的值。 \\begin{align*} Q_i^{(t)}(z^{(i)})&=P(z^{(i)}\\,|\\,x^{(i)};\\theta^{(t)})\\\\ &=P(I\\,|\\,O;\\theta^{(t)})\\\\ &=\\pi_{i_1}b_{i_1}(O_1)a_{i_1i_2}b_{i_2}(O_2)\\dots a_{i_{T-1}i_T}b_{i_T}(O_T) \\end{align*} 其中， $\\pi$ 是之前定义的初始状态的概率分布 $\\pi$ ，$b_{i_T}(O_T)$ 是 $O_T$ 的发射概率矩阵 $B$ ，$a_{i_{T-1}i_T}$ 是状态 $i_{T-1}$ 到状态 $i_{T}$ 的状态转移概率矩阵 $A$ ，$\\theta = (A,B,\\pi)$。 1. E-步骤：求 $Q$ 函数 $Q(\\theta,\\theta^{(i)})$ \\begin{align*} Q(\\theta,\\theta^{(i)})&=\\sum_IP(I\\,|\\,O;\\theta^{(i)})\\log P(O,I;\\theta)\\\\ &=\\sum_I \\dfrac{P(O,I;\\theta^{(i)})}{P(O;\\theta^{(i)})}\\log P(O,I;\\theta) \\end{align*}我们写出 $Q$ 函数之后后面就要对它进行极大化，也就是说 EM 算法的 M 步骤。既然是最大化，那么只要保证不影响最终的结果，对 $Q$ 函数进行对于最大化来说没有影响的常数因子乘除是可以的。 而 $P(O;\\theta^{(i)})$ 便是概率计算问题中我们解决的问题，对于固定的模型参数来说它是一个常量，因此我们为了后边计算方便可以在上面原先的 $Q$ 函数的基础上乘以它，使得 $Q$ 函数成为： Q(\\theta,\\theta^{(i)})=\\sum_IP(O,I;\\theta^{(i)})\\log P(O,I;\\theta) $\\theta^{(i)}$ 是隐马尔可夫模型参数的当前估计值， $\\theta$ 是要极大化的隐马尔可夫模型参数。 $P(O,I;\\theta^{(i)})$ 是确定的值，即它可能为 $[0,1]$ 中的任何值，根据 $\\theta^{(i)}$ 算出。 如果仔细观察式子的话，该式就是对随机变量 $I$ 求期望。即： \\begin{align*} Q(\\theta,\\theta^{(i)})&=E[f(I)]=E[\\log P(O,I;\\theta)]\\\\ &=\\sum_{k=1}^{\\infty}g(x_k)p_k =\\sum_IP(O,I;\\theta^{(i)})\\log P(O,I;\\theta)\\\\ &=\\sum_IP(O,I;\\theta^{(i)})\\log\\left(\\pi_{i_1}b_{i_1}(O_1)a_{i_1i_2}b_{i_2}(O_2)\\dots a_{i_{T-1}i_T}b_{i_T}(O_T)\\right)\\\\ &=\\sum_I\\log \\pi_{i_1}P(O,I;\\theta^{(i)})+\\sum_I(\\sum_{t=1}^{T-1}\\log a_{i_{t-1}i_t})P(O,I;\\theta^{(i)})+\\sum_I(\\sum_{t=1}^{T-1}\\log b_{i_t}(O_t))P(O,I;\\theta^{(i)}) \\end{align*} 其中， $\\pi$ 是之前定义的初始状态的概率分布 $\\pi$ ，$b_{i_T}(O_T)$ 是 $O_T$ 的发射概率矩阵 $B$ ，$a_{i_{T-1}i_T}$ 是状态 $i_{T-1}$ 到状态 $i_{T}$ 的状态转移概率矩阵 $A$ ，$\\theta = (A,B,\\pi)$。 2. M-步骤： 极大化 $Q$ 函数 $Q(\\theta,\\theta^{(i)})$ 求模型参数 $(A,B,\\pi)$$Q$ 现在有三项，要极大化它，只需要各项分别极大化： (1) 上式第一项可以写成： \\sum_I\\log \\pi_{i_1}P(O,I;\\theta^{(i)})=\\sum_{i=1}^{N}\\log \\pi_iP(O,i_1=i;\\theta^{(i)})由于 $\\displaystyle \\sum_{i=1}^N\\pi_i=1$ ，因此利用拉格朗日乘子法，可以写出第一项的拉格朗日函数： \\sum_{i=1}^{N}\\log \\pi_iP(O,i_1=i;\\theta^{(i)})+\\gamma(\\sum_{i=1}^N\\pi_i-1)令其偏导数为 $0$， \\dfrac{\\partial}{\\partial \\pi_i}\\left[\\sum_{i=1}^{N}\\log \\pi_iP(O,i_1=i;\\theta^{(i)})+\\gamma(\\sum_{i=1}^N\\pi_i-1) \\right]=0 其中 $\\dfrac{\\partial (\\log\\pi_i)}{\\partial \\pi_i}=\\dfrac{1}{\\pi_i}$ ， $\\dfrac{\\partial (\\gamma\\pi_i)}{\\partial \\pi_i}=\\gamma$ 得到： \\sum_{i=1}^{N}\\dfrac{P(O,i_1=i;\\theta^{(i)})}{\\pi_i}+\\sum_{i=1}^{N}\\gamma=0接下来等式两边同乘以 $\\pi_i$ 得到如下式子： P(O,i_1=i;\\theta^{(i)})+\\gamma\\pi_i=0对 $i$ 求和可得：$\\gamma=-P(O;\\theta^{(i)})$ 于是可得：\\pi_i=\\dfrac{P(O,i_1=i;\\theta^{(i)})}{P(O;\\theta^{(i)})} (2) 上式第一项可以写成： \\sum_I(\\sum_{t=1}^{T-1}\\log a_{i_{t-1}i_t})P(O,I;\\theta^{(i)})=\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\sum_{t=1}^{T-1}\\log a_{ij}P(O,i_t=i,i_{t+1}=j;\\theta^{(i)})类似第一项，应用具有约束条件 $\\displaystyle \\sum_{j=1}^Na_{ij}=1$ 的拉格朗日乘子法可以求出： a_{ij}=\\dfrac{\\sum_{t=1}^{T-1}P(O,i_t=i,i_{t+1}=j;\\theta^{(i)})}{\\sum_{t=1}^{T-1}P(O,i_t=i;\\theta^{(i)})}(3) 类似 (1) 有 $\\displaystyle \\sum_{k=1}^Nb_{j}(k)=1$ ，可得： b_{j}(k)=\\dfrac{\\sum_{t=1}^{T-1}P(O,i_t=j;\\theta^{(i)})\\delta(o_t=v_k)}{\\sum_{t=1}^{T-1}P(O,i_t=j;\\theta^{(i)})} 其中，$o_t$ 是在 $t$ 时刻输出的符号，$v_k$ 是 HMM 输出符号集合中的第 $k$ 个符号。 $\\delta(o_t=v_k)$ 为 Kronecker 函数，当 $o_t=v_k$ 时，$\\delta(o_t=v_k) = 1$ ，当 $o_t \\ne v_k$ 时，$\\delta(o_t=v_k) = 0$ 。","categories":[{"name":"算法","slug":"算法","permalink":"http://yoursite.com/categories/算法/"}],"tags":[{"name":"Baum-Welch","slug":"Baum-Welch","permalink":"http://yoursite.com/tags/Baum-Welch/"},{"name":"EM","slug":"EM","permalink":"http://yoursite.com/tags/EM/"},{"name":"隐马尔可夫","slug":"隐马尔可夫","permalink":"http://yoursite.com/tags/隐马尔可夫/"}]},{"title":"EM 算法","slug":"EM-算法","date":"2018-03-01T04:47:34.000Z","updated":"2018-07-28T15:52:34.753Z","comments":true,"path":"2018/03/01/EM-算法/","link":"","permalink":"http://yoursite.com/2018/03/01/EM-算法/","excerpt":"","text":"EM 算法给定的训练样本是 $\\{x^{(1)}, x^{(2)},\\dots,x^{(m)}\\}$ ，样例间独立，我们想找到每个样例隐含的类别 $z$ ，能使得 $p(x,z)$ 最大。 $p(x,z)$ 的最大似然估计如下： \\begin{align*} l(\\theta)&= \\sum_{i=1}^{m}\\log p(x;\\theta)\\\\ &=\\sum_{i=1}^{m}\\log \\sum_z p(x,z;\\theta) \\end{align*} 第一步是对极大似然取对数 第二步是对每个样例的每个可能类别 $z$ 求联合分布概率和。但是直接求 $\\theta$ 一般比较困难，因为有隐藏变量 $z$ 存在，但是一般确定了 $z$ 后，求解就容易了。 EM 是一种解决存在隐含变量优化问题的有效方法。竟然不能直接最大化 $l(\\theta)$ ，我们可以不断地建立 $l(\\theta)$ 的下界（ E 步），然后优化下界（ M 步）。这句话比较抽象，看下面的。 对于每一个样例 $i$ ，让 $Q_i$ 表示该样例隐含变量 $z$ 的某种分布， $Q_i$ 满足的条件是 \\sum_zQ_i(z)=1,Q_i(z) \\geqslant 0如果 $z$ 是连续性的，那么 $Q_i$ 是概率密度函数，需要将求和符号换做积分符号。比如要将班上学生聚类，假设隐藏变量 $z$ 是身高，那么就是连续的高斯分布。如果按照隐藏变量 $z$ 是男女，那么就是伯努利分布了。 可以由前面阐述的内容得到下面的公式： \\begin{align*} \\sum_{i}\\log p(x^{(i)};\\theta)&= \\sum_{i}\\log \\sum_{z^{(i)}} p(x^{(i)},z^{(i)};\\theta) \\tag{1}\\\\ &= \\sum_{i}\\log \\sum_{z^{(i)}}Q_i(z^{(i)})\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})} \\tag{2}\\\\ &\\geqslant \\sum_{i} \\sum_{z^{(i)}}Q_i(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})} \\tag{3} \\end{align*} $(2)$ 式到 $(3)$ 式利用了 Jensen 不等式，而且 $\\displaystyle \\sum_{z^{(i)}}Q_i(z^{(i)})\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}$ 就是 $\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})} $ 的期望（回想期望公式中的Lazy Statistician规则） 解释：根据期望公式，若 $Y$ 是随机变量 $X$ 的函数 $Y=g(x)$ ，$X$ 是离散型随机变量，它的分布律为 $P(X=x_k)=p_k, k=1,2,\\dots$，则 E(Y)=E[g(X)]=\\sum_{k=1}^{\\infty}g(x_k)p_k其中 $Y$ 对应 $\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}$ ， $X$ 对应 $z^{(i)}$ ， $Q_i(z^{(i)})$ 对应 $p_k$ ，$g$ 对应 $z^{(i)}$ 到 $\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}$ 的映射。 证明过程： g(z^{(i)})=\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})} E[g(z^{(i)})]=\\sum_{z^{(i)}}g(z^{(i)})Q_i(z^{(i)}) =\\sum_{z^{(i)}}\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}Q_i(z^{(i)}) E[g(z^{(i)})] \\geqslant g\\left(E(z^{(i)})\\right) \\sum_{i}\\log \\sum_{z^{(i)}}Q_i(z^{(i)})\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})} = \\sum_{i}\\log E[g(z^{(i)})] \\geqslant \\sum_{i}\\log g\\left(E(z^{(i)})\\right)因为考虑到 $\\log (x)$ 是凹函数（二阶导数小于 $0$ ），根据 Jensen 不等式为 $f(E[x]) \\geqslant E[f(x)]$，上式可变换为： f\\left(E(z^{(i)})\\right)=\\log g\\left(E(z^{(i)})\\right),f(z^{(i)})=\\log g(z^{(i)}) \\begin{align*} \\sum_{i}\\log g\\left(E(z^{(i)})\\right)&=\\sum_{i}f\\left(E(z^{(i)})\\right) \\\\ &\\geqslant \\sum_{i}E\\left[f(z^{(i)}) \\right]\\\\ &=\\sum_{i} \\sum_{z^{(i)}}f(z^{(i)})Q_i(z^{(i)})\\\\ &=\\sum_{i} \\sum_{z^{(i)}}\\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}Q_i(z^{(i)}) \\end{align*}所以： \\sum_{i}\\log \\sum_{z^{(i)}}Q_i(z^{(i)})\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})} \\geqslant \\sum_{i} \\sum_{z^{(i)}}\\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}Q_i(z^{(i)}) A：因此，对于任何一种分布 $Q_i$ ，上面的式子 $(3)$ 都给 $l(\\theta)$ 的值确定了一个下限。但是对于 $Q_i$ 的选择，有多种可能，那种更好的？ Q：我们知道，在 EM 算法中的 $E$ 步中，我们的 $\\theta$ 是已知的，即在当前条件下可获得的 $\\theta$ ，假设 $\\theta$ 已经给定，那么 $l(\\theta)$ 的值就决定于 $Q_i(z^{(i)})$ 和 $p(x^{(i)},z^{(i)})$ 了。 我们可以通过调整这两个概率使下界尽可能大（即使得 $(3)$ 的值尽可能大），以逼近 $l(\\theta)$ 的真实值，显然当 $(3)$ 等于 $(2)$ 时 $l(\\theta)$ 的下限最大。 根据 Jensen 不等式我们知道当且仅当 $X$ 是常量时等号成立。这里 $\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}$ 就是 Jensen 不等式中的 $X$ ，我们假设 \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}=c \\Leftrightarrow p(x^{(i)},z^{(i)};\\theta) = cQ_i(z^{(i)})\\Leftrightarrow Q_i(z^{(i)})=\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{c}其中 $c$ 是一个不依赖于 $z^{(i)}$ 的常数。我们知道 $\\displaystyle \\sum_zQ_i(z)=1$ ，因此可得 $\\displaystyle \\sum_zp(x^{(i)},z^{(i)};\\theta) = \\displaystyle \\sum_zcQ_i(z^{(i)})=c$ 进而可得： \\displaystyle Q_i(z^{(i)})=\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{c} =\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{\\displaystyle \\sum_zp(x^{(i)},z^{(i)};\\theta)}=\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{p(x^{(i)};\\theta)}再利用条件概率公式可得： $Q_i(z^{(i)})=p(z^{(i)}\\,|\\,x^{(i)};\\theta)$ 现在我们知道 $Q_i(z^{(i)})$ 该如何选择啦， $Q_i(z^{(i)})$ 的计算公式就是后验概率 $p(z^{(i)}\\,|\\,x^{(i)};\\theta)$ 。 这一步就是 E 步，建立 $l(\\theta)$ 的下界。接下来的 M 步，就是在给定 $Q_i(z^{(i)})$ 后，调整 $\\theta$ ，极大化 $l(\\theta)$ 的下界（在固定 $Q_i(z^{(i)})$ 后，下界还可以调整的更大）。 一般的 EM算法的步骤如下： $ \\quad\\quad \\text{Repeat until converence } \\{$ $ \\quad\\quad \\quad\\quad \\quad\\quad\\text{(E-step) For each i, set }$ Q_i(z^{(i)})=p(z^{(i)}\\,|\\,x^{(i)};\\theta)$ \\quad\\quad \\quad\\quad \\quad\\quad\\text{(M-step) set }$ \\theta:=arg\\max_{\\theta}\\sum_{i} \\sum_{z^{(i)}}\\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}Q_i(z^{(i)}) \\quad\\quad \\quad\\quad\\}假定 $\\theta^{(t)}$ 和 $\\theta^{(t+1)}$ 是 EM 第 $t$ 次和 $t+1$ 次迭代后的结果。 如果我们证明了 $l(\\theta^{(t)}) \\leqslant l(\\theta^{(t+1)})$ ，也就是说极大似然估计单调增加，那么最终我们会到达最大似然估计的最大值。 下面来证明，选定 $\\theta^{(t)}$ 后，我们得到 E 步，为了能取等号，选取 $Q_i(z^{(i)})$ 如下： Q_i^{(t)}(z^{(i)})=p(z^{(i)}\\,|\\,x^{(i)};\\theta^{(t)})进而等号满足： l(\\theta^{(t)}) = \\sum_{i} \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta^{(t)})}{Q_i^{(t)}(z^{(i)})}然后我们通过最大化上面等式的式右面获得了新的参数 $\\theta^{(t+1)}$此时必然有： \\begin{align*} l(\\theta^{(t+1)}) &\\geqslant \\sum_{i} \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta^{(t+1)})}{Q_i^{(t)}(z^{(i)})} \\tag{4}\\\\ &\\geqslant \\sum_{i} \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta^{(t)})}{Q_i^{(t)}(z^{(i)})} \\tag{5}\\\\ &=l(\\theta^{(t)}) \\tag{6} \\end{align*} 解释：式 $(5)$ 利用了 M 步的定义。式 $(5)$ 利用了 M 步的定义， M 步就是将 $\\theta^{(t)}$ 调整到 $\\theta^{(t+1)}$ ，即 $\\theta^{(t+1)}$ 的选择是基于： arg\\max_{\\theta}\\sum_{i} \\sum_{z^{(i)}}\\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}Q_i(z^{(i)})因此 $(5)$ 成立， $(6)$ 是之前的等式结果。 这样就证明了 $l(\\theta)$ 会单调增加。因此 EM 算法是收敛的。 如果我们定义函数 $J(Q,\\theta)$ ： \\begin{align*} J(Q,\\theta)=\\sum_{i} \\sum_{z^{(i)}}\\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})}Q_i(z^{(i)}) \\end{align*}从前面的推导中，我们知道 $l(\\theta) \\geqslant J(Q,\\theta)$ ，EM 可以看作是 $J$ 的坐标上升法， E 步固定 $\\theta$ ，优化 $Q$ ， E 步固定 $Q$ 优化 $\\theta$ 。 解释：固定 $\\theta$ ，调整 $Q(z)$ 使下 $J(Q,\\theta)$ 上升至与 $l(\\theta)$ 在此点 $\\theta$ 处相等，然后固定 $Q(z)$ ，调整 $\\theta$ 使下界 $J(Q,\\theta)$ 达到最大值，此时为新的 $\\theta$ ，再固定 $\\theta$ ，调整 $Q(z)$ ，重复此步骤直到收敛到似然函数 $l(\\theta)$ 的最大值处的 $\\theta^*$ 定义： \\begin{align*} l(\\theta)-l(\\theta^{(t)})&= \\sum_{i=1}^{m}\\log \\sum_z p(x^{(i)},z^{(i)};\\theta) - \\sum_{i=1}^{m}\\log p(x^{(i)};\\theta^{(t)})\\\\ &=\\sum_{i=1}^{m}\\log \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)})\\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i^{(t)}(z^{(i)})}- \\sum_{i=1}^{m}\\log p(x^{(i)};\\theta^{(t)})\\\\ &\\geqslant \\sum_{i=1}^{m} \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i^{(t)}(z^{(i)})} - \\sum_{i=1}^{m}\\log p(x^{(i)};\\theta^{(t)})\\\\ &=\\sum_{i=1}^{m} \\sum_{z^{(i)}}Q_i(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i^{(t)}(z^{(i)})} - \\sum_{i=1}^{m}\\sum_{z^{(i)}} Q_i^{(t)}(z^{(i)}) \\log p(x^{(i)};\\theta^{(t)})\\\\ &=\\sum_{i=1}^{m} \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i^{(t)}(z^{(i)})p(x^{(i)};\\theta^{(t)})} \\end{align*}假设： B(\\theta,\\theta^{(t)})=l(\\theta^{(t)})+\\sum_{i=1}^{m} \\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i^{(t)}(z^{(i)})p(x^{(i)};\\theta^{(t)})}此时 $B(\\theta,\\theta^{(t)})$ 就是 $l(\\theta)$ 的下界，这意味着 $B(\\theta,\\theta^{(t)})$ 变大， $l(\\theta)$ 也能水涨船高的变大。当 $B(\\theta,\\theta^{(t)})$ 达到极大值， $l(\\theta)$ 就是局部最大了。假设 $\\theta^{(t+1)}$ 使得 $B(\\theta,\\theta^{(t)})$ 极大，则： \\begin{align*} \\theta^{(t+1)}&=arg\\max_{\\theta}B(\\theta,\\theta^{(t)})\\\\ &=arg\\max_{\\theta}\\left[l(\\theta^{(t)})+\\sum_{i=1}^{m} \\sum_{z^{(i)}}Q_i(z^{(i)}) \\log \\dfrac{p(x^{(i)},z^{(i)};\\theta)}{Q_i(z^{(i)})p(x^{(i)};\\theta^{(t)})} \\right] \\end{align*}此时去掉对 $\\theta$ 而言是常数的项： \\theta^{(t+1)}=arg\\max_{\\theta}\\sum_{i=1}^{m}\\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log p(x^{(i)},z^{(i)};\\theta)带入 $Q_i^{(t)}(z^{(i)})=p(z^{(i)}\\,|\\,x^{(i)};\\theta^{(t)})$ ，可得下界函数 $Q(\\theta,\\theta^{(t)})$ ： \\begin{align*} Q(\\theta,\\theta^{(t)})&=\\sum_{i=1}^{m}\\sum_{z^{(i)}}Q_i^{(t)}(z^{(i)}) \\log p(x^{(i)},z^{(i)};\\theta)\\\\ &=\\sum_{i=1}^{m}\\sum_{z^{(i)}}p(z^{(i)}\\,|\\,x^{(i)};\\theta^{(t)})\\log p(x^{(i)},z^{(i)};\\theta) \\end{align*}求 $Q$ 最大即是求 $\\theta^{(t+1)}$ 最大，求 $\\theta^{(t+1)}$ 最大即是求 $l(\\theta)$ 局部最大","categories":[{"name":"算法","slug":"算法","permalink":"http://yoursite.com/categories/算法/"}],"tags":[{"name":"极大似然估计","slug":"极大似然估计","permalink":"http://yoursite.com/tags/极大似然估计/"},{"name":"隐变量","slug":"隐变量","permalink":"http://yoursite.com/tags/隐变量/"},{"name":"Jensen 不等式","slug":"Jensen-不等式","permalink":"http://yoursite.com/tags/Jensen-不等式/"}]},{"title":"Install shiny-server on MacOS","slug":"Install shiny-server on macOS","date":"2018-01-24T07:37:34.000Z","updated":"2018-07-26T02:16:31.346Z","comments":true,"path":"2018/01/24/Install shiny-server on macOS/","link":"","permalink":"http://yoursite.com/2018/01/24/Install shiny-server on macOS/","excerpt":"","text":"Install shiny-server on MacOSStep 1:1. Install homebrewinput the code in terminal 1/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 2. Intsall essential software1234brew intsall cmakebrew install g++brew install gccbrew install git Step 2:1. Input the following codes in terminal1234567891011121314151617# Clone the repository from GitHubgit clone https://github.com/nathanweeks/shiny-server.git# Get into a temporary directory in which we&apos;ll build the projectcd shiny-servermkdir tmpcd tmp# Add the bin directory to the path so we can reference nodeDIR=`pwd`PATH=$DIR/../bin:$PATH# See the &quot;Python&quot; section below if your default python version is not 2.6 or 2.7. PYTHON=`which python`# Check the version of Python. If it&apos;s not 2.6.x or 2.7.x, see the Python section below.$PYTHON --version 2. Replace the launcher.cc The current launcher.cc source file must be edited to use the proc_pidpath() function on macOS instead of Linux proc (see this thread). Use this version from Nathan Weeks instead. After replacing the file, you can proceed with cmake and all subsequent installation steps. 12345678# Use cmake to prepare the make step. Modify the &quot;--DCMAKE_INSTALL_PREFIX&quot;# if you wish the install the software at a different location.cmake -DCMAKE_INSTALL_PREFIX=/usr/local/var -DPYTHON=&quot;$PYTHON&quot; ../# Get an error here? Check the &quot;How do I set the cmake Python version?&quot; question below# Recompile the npm modules included in the projectmakemkdir ../build Before execute the following codes,it is necessary to replace package.json (see this thread) 12345(cd .. &amp;&amp; ./bin/npm --python=&quot;$PYTHON&quot; install)(cd .. &amp;&amp; ./bin/node ./ext/node/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js --python=&quot;$PYTHON&quot; rebuild)# Install the software at the predefined locationsudo make install Step 3:1. Place a shortcut to the shiny-server in /usr/bin With macOS and later you have to disable System Integrity Protection (SIP) first. Do this by rebooting your mac into Recovery Mode by restarting and holding down Command+R until the logo appears. Open a terminal from the Utilities menu and type “csrutil disable”, reboot and then execute the command below. Don’t forget to turn on SIP again immediately after, using the same procedure, but now with “csrutil enable” in the terminal 1sudo ln -s /usr/local/var/shiny-server/bin/shiny-server /usr/bin/shiny-server 2. Create the shiny user Create the shiny user that the server will run under The instructions call for useradd but that doesn’t exist in macOS, so we will have to manually do it with dscl 1234567sudo dscl . -create /Users/shinysudo dscl . -create /Users/shiny Password &quot;shiny&quot;sudo dscl . -create /Users/shiny UserShell /bin/shsudo dscl . -create /Users/shiny Realname &quot;Shiny Server&quot;sudo dscl . -create /Users/shiny PrimaryGroupID &quot;80&quot;sudo dscl . -create /Users/shiny UniqueID &quot;502&quot;sudo dscl . -create /Users/shiny NFSHomeDirectory &quot;/Users/shiny&quot; It may be necessary to go into System Preferences /Users &amp; Groups/ GUI and change the password for the shiny user. You must be able to su to the shiny user before continuing. Create Log, config and application directories 12345sudo mkdir -p /var/log/shiny-serversudo mkdir -p /srv/shiny-server # This is the applications directory, all apps go heresudo mkdir -p /var/lib/shiny-serversudo chown shiny /var/log/shiny-serversudo mkdir -p /etc/shiny-server Replace the default.config to /usr/local/var/shiny-server/config/default.config Test the server. At this point you should be able to start the server and serve an app if you put one in the application directory 1234sudo su shiny -c shiny-server[2014-02-19 10:03:45.125] [INFO] shiny-server - Shiny Server v1. 1. 0.0 (Node.js v0.10.21)[2014-02-19 10:03:45.128] [INFO] shiny-server - Using config file &quot;/usr/local/var/shiny-server/config/default.config&quot;[2014-02-19 10:03:45.180] [INFO] shiny-server - Starting listener on 0.0.0.0:3838 # Access the server on port 3838 Input 0.0.0.0:3838 in Browser Step 4:1. Replace the node_modules If the browser page some is showing some error like TyperError ...., the http-proxy in node_modules was not incomplete. So, it is must be replaced as new node_modules If the browser is showing ‘Page NOT Found’,copy index.html in /srv/shiny-server Step 5:1. Make the Shiny Server Start Automatically Create a plist file in /Library/LaunchDaemons called com.xoma.shiny-server.plist that looks like this 123456789101112131415161718192021222324252627&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt; &lt;plist version=&quot;1.0&quot;&gt; &lt;dict&gt; &lt;key&gt;Disabled&lt;/key&gt; &lt;true/&gt; &lt;key&gt;EnvironmentVariables&lt;/key&gt; &lt;dict&gt; &lt;key&gt;PATH&lt;/key&gt; &lt;string&gt;/usr/local/bin/&lt;/string&gt; &lt;/dict&gt; &lt;key&gt;GroupName&lt;/key&gt; &lt;string&gt;admin&lt;/string&gt; &lt;key&gt;KeepAlive&lt;/key&gt; &lt;true/&gt; &lt;key&gt;Label&lt;/key&gt; &lt;string&gt;com.xoma.shiny-server&lt;/string&gt; &lt;key&gt;Program&lt;/key&gt; &lt;string&gt;/usr/bin/shiny-server&lt;/string&gt; &lt;key&gt;RunAtLoad&lt;/key&gt; &lt;true/&gt; &lt;key&gt;UserName&lt;/key&gt; &lt;string&gt;shiny&lt;/string&gt; &lt;key&gt;WorkingDirectory&lt;/key&gt; &lt;string&gt;/usr/local/var/shiny-server&lt;/string&gt; &lt;/dict&gt; &lt;/plist&gt; Start the server with 1sudo launchctl load -w /Library/LaunchDaemons/com.xoma.shiny-server.plist","categories":[{"name":"杂谈","slug":"杂谈","permalink":"http://yoursite.com/categories/杂谈/"}],"tags":[]},{"title":"Awesome Mac","slug":"Awesome Mac","date":"2017-10-01T04:47:34.000Z","updated":"2018-07-26T02:15:57.643Z","comments":true,"path":"2017/10/01/Awesome Mac/","link":"","permalink":"http://yoursite.com/2017/10/01/Awesome Mac/","excerpt":"","text":"Awesome MacContents Editors and IDE Development Tools Test Tools Command Line Tools Version Control Systems Databases Design and Product Virtual Machines Communication Data Recovery Tools Audio and Video Tools Reading and Writing Tools Ebooks FTP Clients Frameworks For Hybrid Applications Download Management Tools Online Storage Input Methods Web Browsers Translation Tools Proxy and VPN Tools Utilities Remote Login Software QuickLook Plugins Third Party App Markets Mac App Download Sites Editors and IDEapplications to edit text, I suggest the open-source editors Text Editors Atom - A hackable text editorfor the 21st century made by GitHub.Atom Plugins. Sublime Text - A sophisticated text editor for code, markup and prose. You’ll love the slick user interface, extraordinary features and amazing performance, Sublime Text Plugins. Brackets - A modern, open-source text editor that understands web design by Adobe. Espresso - The web editor for Mac is back. For people who make delightful, innovative and fast websites. Visual Studio Code - Microsoft’s free &amp; open-source editor, TypeScript friendly, VSCode Plugins. Emacs - A popular text editor used mainly on Unix-based systems by programmers, scientists, engineers, students, and system administrators. LightTable - The next generation code editor. TextMate - An editor that brings Apple’s approach to operating systems into the world of text editors. BBEdit - The leading professional HTML and text editor for Macintosh. Vim - A highly configurable text editor built to make creating and changing any kind of text very efficient, Vim Plugins. Vimr - Refined Vim Experience for OS X. ONI - An IDE powered by Neovim. micro - a modern and intuitive terminal-based text editor. HBuilder - An IDE for web development (Support HTML5), built by DCloud. Tincta - A text editor for Mac OS X. CotEditor - Lightweight plain-text editor for macOS. Chocolat Native text editor. IDEs Xcode - The essential IDE for iOS/macOS development. IntelliJ IDEA - A powerful Java IDE. (Free for Students) Coda2 - A fast, clean and powerful text editor. Eclipse - Popular open-source IDE, mainly for Java but with plugin support for a wide array of languages and platforms. WebStorm - The smartest JavaScript IDE by JetBrains. FREE for Students, check here for more info. NodeJS - Node.js integration. You definitely need this, quite a few features require it. EditorConfig - A JetBrains IDE plugin supporting the EditorConfig standard. Material Theme UI - Provides 3 modes, nice and clean. Deco IDE - The best IDE for building React Native apps. Xamarin Studio - Free cross platform C# IDE. Xamarin Studio supports iOS, Android and .Net development NetBeans IDE - A free and open-source IDE, mainly used for Java development, but supports many other languages and frameworks. Android Studio - The official IDE for Android, based on Intellij IDEA. Development Tools WeFlow - Development tools for front-end workflows based on tmt-workflow. Koala - A GUI application for Less, Sass, Compass and CoffeeScript compilation. CodeKit - Web development tool which can automatically compile Less, Sass, CoffeeScript, TypeScript, Jade and JavaScript, auto-refresh browsers and much more. PaintCode - PaintCode is a unique vector drawing app that generates Objective-C or Swift code in real time, acting as a bridge between developers and graphic designers. Hosts.prefpane - A system preference pane to manage your hosts file. iHosts - The only /etc/hosts editor on Mac App Store. SwitchHosts - A free and open-source app for hosts management &amp; switching.. Gas Mask - A simple hosts file manager for Mac OS X. DiffMerge - An application to visually compare and merge files. Gemini - An intelligent duplicate file finder. BetterRename - The most powerful and complete Mac file renaming application on the market. PPRows - An application which can calculate how many lines of code you write. Beyond Compare - Compare files and folders using simple, powerful commands that focus on the differences you are interested in and ignore those you are not. Kaleidoscope - A powerful compare tool for text, images and folders. It works perfectly with git, svn or other version control tools. Fanvas - Convert swf to html canvas animation. EnvPane - An OS X preference pane for environment variables. Dash - Awesome API documentation browser and code snippet manager. DLite - The simplest way to use Docker on OS X. SnippetsLab - Easy-to-use code snippets manager. StarUML - Powerful UML app. Vagrant Manager - Manage your vagrant machines in one place. zeplin - A collaboration tool for work between designers and developers. Go2Shell - Open terminal from Finder. SecureCRT - A terminal emulation which supports SSH, Telnet or other protocols. Finicky - An application that allows you to set up rules that decide which browser is opened for every link that would open the default browser. MJML - A framework that utilizes a semantic syntax and a rich standard components library, which allow users to easily create responsive emails. TeXstudio - An integrated writing environment for creating LaTeX documents. Vagrant - A tool for building and distributing development environments. FinderGo - 🐢 Open terminal quickly from Finder Localname - Provide access to your local development server LaunchRocket - Brew services management in Mac System Preferences. Regular Expression Editors Patterns - A regular expression editor. Reginald - A regular expression test application. RegexKitLite. Regex - A regular expression testing tool with an emphasis on simplicity. Reggy - An open-source regular expression editor. RegExRX - A development tool for regular expressions. Test Tools Wireshark - The world’s foremost and widely-used network protocol analyzer. Charles - An HTTP proxy / HTTP monitor / Reverse Proxy that enables a developer to view all of the HTTP and SSL / HTTPS traffic between their machine and the Internet. James - Open-source proxy tool for checking and mapping requests with http as well as https. mitmproxy - An interactive intercepting HTTP proxy for penetration testers and software developers Insomnia 3.0 - A beautiful HTTP testing tool. Cocoa Rest Client - A free open-source, native Apple OS X app for testing HTTP/REST endpoints. Paw - An advanced HTTP client. Cellist - HTTP debugging proxy for OS X. Integrity - A free website link checker for Mac. Postman - A powerful GUI platform to make your API development faster &amp; easier, from building API requests through testing, documentation and sharing. Command Line Tools Mac OS X Manual Pages - Manual pages recommended reference for a number of BSD and POSIX functions and tools. iTerm2 - iTerm2 is an amazing terminal emulator for OS X. tmux A “terminal multiplexer”, it enables a number of terminals (or windows) to be accessed and controlled from a single terminal. tmux is intended to be a simple, modern, BSD-licensed alternative to programs such as GNU screen. mas - A simple command line interface for the Mac App Store. cool-retro-term - A good looking terminal emulator which mimics the old cathode display. Oh my zsh - An open-source, community-driven framework for managing your ZSH configuration. It comes bundled with a ton of helpful functions, helpers, plugins, themes. autojump - A cd command that learns - easily navigate directories from the command line Prezto — Instantly Awesome Zsh - The configuration framework for Zsh; it enriches the command line interface environment with sane defaults, aliases, functions, auto completion, and prompt themes. Glances - Glances is a cross-platform curses-based system monitoring tool. Cakebrew - A GUI client for Homebrew. Install, check or remove apps, no command-line needed. ndm - Manage npm straight from the couch. Black Screen - A terminal emulator for the 21st century. Fish Shell - A smart and user-friendly terminal, which is similar with zsh oh-my-fish - Alternative to oh-my-zsh，on fishShell framework bash-it - Shameless ripoff of oh-my-zsh for bash. HyperTerm - A terminal built on web technologies. itunes-remote - Software for controlling iTunes via the terminal. mycli - A command line client for MySQL that can do auto-completion and syntax highlighting. Mac-CLI - The ultimate tool to manage your Mac. automatize the usage of your OS X system. m-cli - Swiss Army Knife for macOS. lnav - A log file navigator. cmus - A small, fast and powerful console music player for Unix-like operating systems. Serial - Full-featured serial terminal for the Mac. Version Control Systems Git - A distributed version control tool, the official website provides dozens of GUI clients for Mac. SVN - An open-source version control system. Version Control GUIs GitFinder - A fast and lightweight Git client for Mac with Finder integration. Fork - A fast and friendly Git client for Mac. Gitbar - Open-source，display Github contribution statistics on your menu bar. GitHub Desktop - The GitHub official GUI. OhMyStar Beautiful and efficient way to manage, explore and share your Github Stars. GitUp - A simple and powerful Git client. Hub - A command-line wrapper for Git that makes you better at GitHub. SourceTree - A free Git &amp; Mercurial client for Windows or Mac. Tower2 - The most powerful Git client for Mac and Windows. Versions - A Mac Subversion Client (SVN). Cornerstone - Powerful version control with a gorgeous interface. SmartGit - A Git client with support. GitKraken - The most popular Git GUI for Windows, Mac AND Linux. Version Control Managers GitLab - Open-source Git repo management software. Github - Code hosting, project management and deployment for software projects. Coding.net - A one-stop cloud platform for developers, free repository hosting, project collaboration, code quality assurance and Page service. phabricator - Open software engineering platform and fun adventure game. Gogs - Gogs (Go Git Service) is a painless self-hosted Git service. Gerrit - Provides web based code review and repository management for the Git version control system. Gitblit - Pure java Git solution for managing, viewing, and serving Git repositories. Databases Sequel Pro - MySQL database management for Mac OS X. MySQL Workbench - The official MySQL GUI. Navicat Data Modeler - Is a powerful and cost-effective database design tool which helps you build high-quality conceptual, logical and physical data models. SQLPro Studio - A simple, powerful database manager for macOS. Bdash - A modern SQL client application, supports MySQL, PostgreSQL (Redshift) and BigQuery. Postico - A Modern PostgreSQL client for Mac. ElectroCRUD - A modern MySQL CRUD application. Base 2 - An application for creating, designing, editing and browsing SQLite 3 database files. SQLight - Is an SQLite database manager tool. DB Browser for SQLite - The Official home of the DB Browser for SQLite. Postgres.app - The easiest way to get started with PostgreSQL on the Mac. PSequel - PostgreSQL GUI tool for Mac OS X. Robo 3T - Native and cross-platform MongoDB management tool (Admin UI). MongoBooster - Shell-centric and cross-platform GUI tool for MongoDB. It provides update-in-place, fluent query builder, ES6 syntax support and True IntelliSense experience. Mongo Management Studio - A simple MongoDB GUI. MongoChef - The GUI for MongoDB. Mongotron - A Mongo DB GUI built using Electron, and Angular Js. Chrome MySQL Admin - A powerful Chrome app to manage your MySQL. JackDB - A secure, collaborative environment for your queries and data-driven insights. Medis - GUI Manager for Redis. RedisDesktopManager - Cross-platform GUI management tool for Redis. MDB Explorer - MDB tool to open, read, export your MDB files to other formats and databases. Datum - SQLite - A full featured, modern, and fast SQLite manager. mongoDB.app - The easiest way to get started with mongoDB on the Mac. DataGrip - Database management software by JetBrains. FREE for Students, check here for more info Tableau Public - Free data-visualization software. Core Data Editor - Core Data Editor lets you easily view, edit and analyze applications‘ data. Keylord - Keylord is a desktop GUI client for Redis, Bolt, LevelDB and Memcached key-value databases. DBeaver - A Universal SQL Client Design and ProductDesign Tools Acorn - A great Mac OS X picture and photo editor, built for humans. Affinity Designer - Professional graphic design software for Mac. Affinity Photo - Professional image editing software for Mac. Blender - Free and open 3D creation software. Pixelmator - Full-featured image editor for Mac. Sketch - Professional digital design for mac. Sketch Toolbox - A super simple plugin manager for Sketch. Measure - Make it a fun to create spec for developers and teammates. User Flows - generating flow diagrams from Artboards. Sketch Cache Cleaner -Deletes hidden Sketch history files that can take a lot of space on your hard drive and that you would probably never use. Gravit Designer - Gravit Designer is a full featured free vector design app right at your fingertips. inklet - Turn your Mac trackpad into drawing board. Alchemy - An experimental, open-source drawing application with an emphasis on creating conceptual art. MyPaint - Is a simple drawing and painting program that works well with Wacom-style graphics tablets. GIMP - The GNU Image Manipulation Program. Inkscape - is a professional vector graphics editor. Monodraw - Powerful ASCII art editor designed for the Mac. SketchBook - Drawing software for concept design, comic art, and digital sketching. Tayasui Sketches - Professional drawing software. Art Text 3 - This is graphic design software specifically tuned for lettering, typography, text mockups and various artistic text effects. FontForge - Free (libre) font editor. Nik Collection - Google Nik collection. Paintbrush - A bitmap image editor. Krita - Open-source digital painting software for concept artists, digital painters, and illustrators. Vectr - Free graphics editor used to create vector graphics easily and intuitively. Principle - An application for designing animated and interactive user interfaces. MagicaVoxel - A free lightweight 8-bit voxel editor and interactive path tracing renderer. ScreenToLayers - Easily export your screen into a layered PSD file. Pixel Perfect - A tool to overlay design images over implementation and make it pixel perfect. Sparkle - Pro visual web design. Prototyping And Mind-mapping Tools Origami Studio - A new tool for designing modern interfaces, built and used by designers at Facebook. FLINTO - Quickly create interactive prototypes of mobile, desktop, or web apps. Kite - A powerful animation and prototyping application for Mac &amp; iOS. Justinmind - Prototyping platform for web and mobile apps. MockFlow - Online prototyping suite for web-design and usability testing. Axure RP 8 - Prototypes, specifications and diagrams in one tool. pencil - A free, open-source tool for making diagrams and GUI prototyping. Mockplus - Prototype faster, smarter and easier. OmniGraffle - Diagramming and graphic design for Mac, iPhone, and iPad. XMind - The most popular mind-mapping tool on the planet. Lighten - The best way to clarify thinking, boost productivity, brainstorm, and visualize concepts. Scapple - Practical mind-mapping software with free whiteboard-like layout. Framer - A tool for interactive prototyping. Balsamiq Mockups - A wire-framing tool that helps you work faster and smarter. Marvel - Simple design, prototyping and collaboration. MindNode - Mind-mapping software with an emphasis on simplicity and ease-of-use. WriteMapper - Get from idea to final draft in no time. SimpleMind - Is the world leader in cross platform Mind Mapping tools. Adobe XD (Experience Design) - The first all-in-one cross-platform tool for designing and prototyping websites and mobile apps. Other Tools TinyPNG4Mac - Open-source tool to compress images. Image2icon - Create and personalize icons from your pictures. ImageAlpha - Compress images with PNG format and remove transparency. Resize Master - Batch resize and watermark your images fast and easy. JPEGmini - Reduce image size by up to 80%, without compromising quality. ImageOptim - Compress images and remove EXIF information. Sip - The best way to collect, organize &amp; share your colors. Mark Man - Measure &amp; Spec Fast. Frank DeLoupe - A color-picking tool, supports Retina. ColorSchemer - A professional color matching application for your Mac. IconKit - An App icon generator. Snagit - Simple, Powerful Screen Capture Software and Screen Recorder. GifCapture GIF capture app for macOS. Gifox Gif Recording and Sharing. APNGb - A png image assembler/disassembler app. LICEcap - Record your screen and export to GIF. You can change the recording area anytime during recording. Kap - An open-source screen-recorder built with web technology. GIPHY Capture - Capture and share your screen as a GIF. Skitch - A screen capture application with a powerful annotation capabilities. Teampaper Snap - Let your screenshots speak up. Monosnap - Make screenshots. Draw on it. Shoot video and share your files. It’s fast, easy and free. Jietu - Screenshot with a powerful annotation capabilities, by Tencent. ScreenShot PSD - Capture the screen as a layered PSD for easy editing. Snip - An application for sharing captured images on QQ Mail. iPic - Easily upload images with Markdown supported. Iconjar - Icon management tool to organize or search your icons. svgus - Organize, clean and transform your SVGs. RightFont - Preview, sync, install and manage fonts on Mac, Dropbox or Google Drive. Solarized - Clean and beautiful color theme. Works well with iTerm, JetBrains products, Vim etc. Virtual Machines Parallels - Powerful, easy-to-use VM. No free upgrade for each new Mac OS. Virtual Box - A powerful x86 and AMD64/Intel64 virtualization product. VMWare Fusion - A powerful, commercial VM developed by VMware. Veertu - The lightest VM on Mac. A responsive, sandboxed &amp; native way to run VM on your Mac. CommunicationTeam communication and collaboration tools Franz - An Electron based, multi-protocol wrapper for web-based chat client. One application, 23 messenger services. QQ - Official QQ app for Mac. WeChat - Official WeChat app for Mac. Electronic WeChat - An open-source WeChat client, build with Electron. Skype - A cross-platform application that provides video chat and voice call services. Users can exchange images, text, video and any other digital documents. Maipo - A third-party Weibo client for Mac OS. 御飯 - A third-party FanFou client for Mac OS. ChitChat - Unofficial WhatsApp. Telegram - A messaging app with a focus on speed and security. Messenger For Mac - A third-party Facebook messenger for Mac. Adium - A free instant messaging application for Mac OS X, connecting to AIM, MSN, SMPP, Yahoo and more. Textual - Textual is the world’s most popular application for interacting with Internet Relay Chat (IRC) chatrooms on OS X. Gitter - An instant messaging and chat room system for developers as well as GitHub users. Developer friendly with Markdown syntax support. 简聊 - A communication tool for enterprise use. You can build your own service with its open-source version. 钉钉 - A free office communication platform for enterprise use. LimeChat - An open-source IRC client for Mac OS X. Slack - Awesome tool for team collaboration and communication. 零信 - Work anywhere at anytime. Cross platform. 今目标 - An internet work platform for small-to-medium sized enterprises. BearyChat - Team collaboration and communication tool for internet-based teams. Bitpost - A private decentralized messaging system. Instead of connecting to centralized servers(like Facebook, Gmail etc.) or federated servers(like email, IRC, Jabber), it uses P2P protocol to send encrypted messages to another person or to many subscribers. Teambition - A team collaboration tool, including many features like task plan, schedule, file sharing, instant discussion and everything you need when collaborating with other team members. WeeChat - The extensible command-line chat client. Rambox - messaging and emailing app that combines common web applications into one. Email Clients Spark - A fast email client. For both Mac OS and iOS. Airmail - A fast email client. For both Mac OS and iOS. Nylas Mail - An extensible desktop mail app built on the modern web. Foxmail - A fast email client. Mail Master - Netease full platform of the mailbox management client. MailTags - Use tags to organize email and schedule N1 - An extensible, open-source mail app, free for developers and $7/month for Pro. Postbox - A powerful, simple and beautiful email client, need to pay for a license. Polymail - Simple, beautiful and powerful email client. Newton(formerly Cloudmagic) - An excellent email client with concise interface, scheduling and read receipts. ThunderBird - Software made to make email easier.。 Yomail - Maybe the best email client for email。 Data Recovery Tools DiskWarrior - The world’s most advanced repair and recovery tool for Mac. Data Rescue - A comprehensive and professional data recovery tool for most cases. Stellar Phoenix Mac Data Recovery - A powerful recovery tool for Mac file recovery, Time machine recovery, Encrypted Disk recovery and much more. R-Studio for Mac - A powerful tool which recovers data on disks, even if their partitions are formatted, damaged or deleted. Audio and Video Tools Popcorn Time - Watch torrent movies instantly, This Popcorn Time service will never be taken down. Download and enjoy. Kodi - An award-winning free and open-source (GPL) software media center for playing videos, music, pictures, games, and more. mpv - A free, open-source, and cross-platform media player. IINA - The modern video player for macOS, Based on mpv, the powerful media player project. Soda Player - A player that can play seed, magnetic links, online video, automatic captions, links and local video files. VOX Player - #1 high-definition audio player for Mac and iPhone. Music just sounds better! Radiant Player - Third party Google Play Music client. Sonora - A minimal, beautifully designed music player. Audacity - A free, open-source, cross-platform audio software for multi-track recording and editing. Natron - Open-source compositing software. Node-graph based. Similar in functionalities to Adobe After Effects and Nuke by The Foundry. Ardour - Cross-platform audio software for multi-track recording and editing. Hydrogen - Professional yet simple and intuitive pattern-based drum programming for GNU/Linux. Audio Hijack - Record any application’s audio, including VoIP calls from Skype, web streams from Safari, and much more. Stringed 2 - Music practice software designed to help users learn how to play their favorite songs. Mixxx - The most advanced free DJ software. MuseScore - Free, open-source music notation software. Cog - A free, open-source audio player. Elmedia Player - This media player is a super versatile app for any file format you probably may think of: FLV, MP4, AVI, MOV, DAT, MKV, MP3, FLAC, M4V are all supported as well as many others. VLC - A free, open-source, cross-platform multimedia player as well as framework that plays most multimedia files, DVDs, Audio CDs, VCDs and various streaming protocols. XLD - A tool to decode, convert and play various ‘lossless’ audio files. HandBrake - A tool for converting video from nearly any format to a selection of modern, widely supported codecs. MPlayerX - A simple, powerful, beautiful media player. Playback - Experimental video player. ScreenFlow - Screencasting and video editing software. Shotcut - Free open-source video editor. ArcTime - A simple, powerful, efficient subtitle creation software. Perian - (Retired, no longer supported) Let QuickTime play all the common formats of free plug-ins. Adapter - Free audio, video and image conversion software. Synfig Studio - Synfig Studio is free, open-source 2D animation software. Aegisub - Aegisub is a free, cross-platform open source tool for creating and modifying subtitles. Aegisub makes it quick and easy to time subtitles to audio, and features many powerful tools for styling them, including a built-in real-time video preview. iFFmpeg - A Comprehensive Media Tool for macOS. Making High Quality Video Encoding Accessible for Everyone. Reading and Writing Tools OpenOffice - Compatible with other major office suites, Apache OpenOffice is free to download, use, and distribute. 。 LibreOffice - LibreOffice is free and open-source software. Development is open to new talent and new ideas, and our software is tested and used daily by a large and devoted user community. KOffice - KOffice contains a word processor (KWord), a spreadsheet (KSpread), a presentation program (KPresenter), and a number of other components that varied over the course of KOffice’s development. Spillo - Powerful, beautiful and amazingly fast Pinboard client for OS X. iChm - An ebook reader for CHM (Microsoft Compiled HTML help) files. Chmox - Read CHM documents on your Mac. CHM Reader - Read Compiled HTML (.chm) documents on your Mac. Skim - A PDF reader and note-taker for OS X. PDF Expert - Read, annotate and edit PDFs, change text and images. MarginNote - An in-depth PDF and EPUB reading, learning, managing and note taking app. Kindle App - Amazon official reading app of kindle. Klib - A new way to manage highlights for Kindle and iBooks. texpad - A great LaTeX editor for Mac with auto-update PDF and autocomplete LaTeX commands. Bear Writer - Bear is a beautiful, flexible writing app for crafting notes and prose. Boostnote - note-taking app made for programmers. QOwnNotes - Is the open source notepad with markdown support and todo list manager. RSS Feeds 2 - Keep tabs on your favorite website and RSS feeds from your Mac’s menubar. ReadKit - A Mac read later client supporting all major providers: Instapaper, Pocket and Readability. Even more, ReadKit is a full-featured RSS reader as well. Reeder 3 - A news reader for Feedbin, Feedly, Feed Wrangler and so on. Leaf - An amazing news reader dedicated to help you enjoy your daily news and easily manage your subscriptions. Vienna - An RSS/Atom reader for Mac OS X. Markdown Yu Writer - A Markdown text editor that can find writing fun. ![tuijian] ![必备] Mou - A Markdown editor for developers, on Mac OS X. Marp - A Markdown presentation writer with cross-platform support. TextNut - A rich-format editor featuring Markdown export and Markdown syntax hints. MWeb - Pro Markdown writing, note taking and static blog generator App. Typora - A truly minimal Markdown editor featuring seamless live preview. MacDown - An open-source Markdown editor for OS X. EME - Recently launched a Markdown editor, interface is like Chrome browser interface, very simple. LightPaper - Simple, beautiful, yet powerful text editor for your Mac. Marked 2 - Markdown previewer, reviewer, and exporter. Great for people that already have a preferred way of editing Markdown, but want to get a live preview of the document they are working on. iA Writer - Writing app with an emphasis on simplicity and design. Ultimate - The Ultimate Writing App for Mac, iPad and iPhone. Cmd Markdown - Cmd Markdown Open the journey of excellence. Note-taking Quiver - The Programmer’s Notebook, lets you easily mix text, code, Markdown and LaTeX within one note, edit code with an awesome code editor and live preview Markdown and LaTeX. Evernote - Infamous note-taking app, available on many platforms. OneNote - Note-taking app by Microsoft. Inkdrop - The notebook app for Markdown lovers built on top of Electron. Notes - A clean, simple note-taking app. Notebook Note-taking app. 有道云笔记 - A note-taking app. It features multi-level notebook structure，Markdown syntax and iWork/Office preview. 为知笔记 - A note-taking app. It features multi-level notebook structure, multi tags, Markdown syntax and unlimited cloud storage space. Leanote - A note-taking app. Features Markdown syntax and blog export. Ebooks Calibre - A free and open-source e-book computer software application suite which runs on multiple platforms, allows users to manage e-book collections as well as create, edit, and read e-books. Sigil - A multi-platform EPUB ebook Editor. Scribus - Professional layout and publishing software supporting EPS and SVG import/export, and PDF support. FTP Clients Transmit - A highly flexible and intuitive FTP client, supports SFTP, S3 and iDisk/WebDAV. Flow - An award-winning, beautiful, fast, and reliable FTP + SFTP client. Yummy FTP - Pro-level, fast, reliable FTP/S + SFTP + WebDAV/S file transfer app. Cyberduck - A libre FTP, SFTP, WebDAV, S3, Backblaze B2, Azure and OpenStack Swift browser. FileZilla - A free software, cross-platform FTP application. Supports FTP, SFTP and FTPS (FTP over SSL/TLS). Frameworks For Hybrid Applications create-dmg - Create a good-looking DMG for your macOS app in seconds. nw.js - Build desktop application with HTML and JavaScript. It lets you call all Node.js modules directly from DOM and enables a new way of writing applications with all Web technologies. Electron - Build cross platform desktop application with JavaScript, HTML and CSS. Electrino - Desktop runtime for apps built on web technologies, using the system’s own web browser engine. react-desktop - React UI Components for macOS Sierra. ReactXP - Microsoft official production, support platform Web, iOS, Android and Windows UWP is still an ongoing work. React Native macOS - Build OS X desktop apps using React Native and Cocoa. React Native for Ubuntu - Build Ubuntu desktop apps using React Native. AppJS - A lightweight JavaScript UI library for creating mobile webapps that behave like native apps. HEX - Build cross-platform desktop application with HTML and JavaScript. Made by YouDao. (Broken official website) AlloyDesktop - Build cross-platform desktop application with HTML and JavaScript. Made by Tencent (Not very recommended). MacGap - Provides a lightweight JavaScript API for OS X integration, such as displaying native notifications or writing data to a file. ionic - Build amazing native and progressive web apps with Angular and open web technologies. One app running on everything. Download Management Tools Transmission - A Fast, Easy, Free BitTorrent Client. aria2 - A lightweight multi-protocol &amp; multi-source command-line download utility. JDownloader - A free, open-source download management tool with a huge community of developers that makes downloading as easy and fast as it should be. You-Get - A tiny command-line utility to download media contents (videos, audios, images) from the web. Free Download Manager - A powerful, modern download accelerator and organizer for Windows and Mac. (FREE) FOLX - A free download manager for Mac OS X with a true Mac-style interface. Downie - Video downloader for macOS with support for YouTube and other 1200 sites. Online StorageI recommend using online storage with Mac clients Dropbox - A file hosting service that offers cloud storage and file synchronization with collaborative edit features. Baidu cloud - Baidu cloud official client. Tecent cloud - Tencent cloud client. (Require Tencent Account, Missing English UI and Docs) Jianguo cloud - Jianguo cloud client. (Not recommended) 115 - 115 cloud client. ~~360 - 360 cloud client. ~~ ownCloud Cloud storage. NextCloud - An actively maintained fork of ownCloud, faster and completely open-source Mega - Free cloud service, offers 50GB free storage. Seafile - Reliable and High Speed File Sync and Share. Input Methods ~~QQ Input for Chinese - Produced by Tencent. ~~ Sogou Input for Chinese - Sogou input. Baidu Input for Chinese - Baidu input. Qingge Wubi Input - Wubi input produced for iOS and Mac. WBIM - Wubi input method. Emoticon Input - Emoticons icons or characters input method. RIME - Rime input method. hallelujahIM - hallelujah English input method. Rocket - Makes typing emoji faster and easier using Slack-style shortcuts. Web BrowsersBrowsers on Mac OS Safari - Built-in browser of Mac OS. Chrome - Chrome, produced by Google Chromium - Chromium is an open-source web browser project by Google, to provide the source code for Google Chrome. Firefox - Firefox is a free, open-source web browser developed by the Mozilla Foundation. Opera - Opera. QQ Browser - QQ browser, produced by Tencent. 傲游云浏览器 - Vivaldi - Vivaldi, new browser from Opera’s developers. Ōryōki - Ōryōki, small web browser with a thin interface. This is an experimental project, currently in development. Brave - Web browser with an emphasis on privacy and speed. Translation Tools(Or you could just use the Mac OS built-in dictionary) iTranslate - Translate entire website instantly with its built-in browser or with iTranslate Safari extension into over 40 languages. YouDao Translate - 海词词典 - Eudic - Grammarly - Refine your english Proxy and VPN Tools SpechtLite - A rule-based proxy app for macOS. ShadowsocksX - A secure socks5 proxy, designed to protect your internet traffic. ShadowsocksX-NG - Next generation of ShadowsocksX. Lantern - Lantern is a free application that delivers fast, reliable and secure access to the open internet. 鱼摆摆 - An application for the access to open internet. Tunnelbear - Really simple VPN to browse the web privately &amp; securely. Unblock websites around the world with applications for Mac, PC, iOS, Android &amp; Chrome. Tunnelblick - A free, open-source graphic user interface for OpenVPN on OS X. GoAgentX - An application for the access to open internet. Surge - Surge is a web developer tool and proxy utility for iOS 9. srocket - An application for the access to open internet. LoCoVPN - An application for the access to open internet. 二师兄VPN - An application that connects you to the VPN. GTX加速器 - An application that connects you to the VPN. GreenVPN - A powerful and fun tools that helps you to solve any network issues. (Mainly used for the access to open internet) WiseVPN - Unlimited traffic, free VPN. 风驰VPN - An application that connects you to the VPN. 开眼 - A Chrome plugin for the access to open internet. PlutoX - An application that connects you to the VPN. tinc - Secure mesh VPN software. Shimo - VPN Client for Mac, provides many features related to VPN usage. FreeVPN Plus - Never expired Mac free VPN. UtilitiesGeneral Tools Alfred - An award-winning app for Mac OS X which boosts your efficiency with hotkeys, keywords, text expansion and more. Search your Mac and the web, and be more productive with custom actions to control your Mac. BetterZip 3 - An archive tool supports ZIP, TAR, TGZ, TBZ, TXZ (new), 7-ZIP, RAR。 Keka - A free file archiver for macOS. Compression formats supported:7z, Zip, Tar, Gzip, Bzip2, DMG, ISO. Extraction formats supported: RAR, 7z, Lzma, xz, Zip, Tar, Gzip, Bzip2, ISO, EXE, CAB, PAX. Numi - A beautiful calculator app for Mac. Memo - Memo is a simple and elegant app,Unlock memos even more quickly using Touch ID. Itsycal - A tiny calendar for your Mac’s menu bar. BitBar - An app lets you put the output from any script or program right in your Mac OS X menu bar. Has a good community. ClipMenu - A clipboard manager for Mac OS X. Paste - Smart clipboard history &amp; snippets manager. iPaste - Lightweight and efficient clipboard tool. ControlPlane - Manages configuration profiles for your Mac. Determines where you are or what you are doing based on a number of available evidence sources and then automatically reconfigures your Mac based on your preferences. AirServer - The most advanced screen mirroring software receiver for Mac, PC and Xbox One. Hazel - Automated file organization for your Mac. Responsibly and beautifully designed. MacAssistant - Google Assistant for macOS muCommander - A lightweight file manager with a dual-pane interface. GTD (Getting Things Done) Todoist - A cross-platform todo list app. dida365 - Lightweight to-do application。 TaskPaper - Plain text to-do lists. Fantastical - The calendar app you won’t be able to live without. Day-O 2 - Menu bar clock replacement with built-in calendar. Things - A delightful and easy to use task manager. (Award-winning App) OmniFocus - A nice GTD app, made by OmniGroups. 2Do - A nice todo app. Wunderlist - The easiest way to get stuff done. OnyX - Multifunction utility to verify disks and files, run cleaning and system maintenance tasks, configure hidden options and more. Focus - A beautiful pomodoro-based time manager. Productivity xScope - A powerful set of tools that are ideal for measuring, inspecting &amp; testing on-screen graphics and layouts. Karabiner - A powerful and stable keyboard customizer for OS X. Ukelele - Unicode Keyboard Layout Editor. Keytty - A app to keep your hands on the keyboard. Move, click, scroll, drag and more with a few strokes. Mos - A simple tool can offer the smooth scrolling and reverse the mouse scrolling direction on your Mac. BetterTouchTool - A great, feature-packed app that allows you to configure many gestures for your Magic Mouse, Macbook Trackpad, Magic Trackpad and also Mouse Gestures for normal mice. Hammerspoon - A tool for powerful automation of OS X, programmable by Lua scripting engine. Qbserve - Time tracking automation: freelance project tracking, timesheets, invoicing &amp; real-time productivity feedback. Timing - Automatic time and productivity tracking for Mac. Helps you stay on track with your work and ensures no billable hours get lost if you are billing hourly. Window Management ShiftIt - Managing window size and position in OSX. Moom - Allows you to easily move and zoom windows, or to another display—using either the mouse or the keyboard. Divvy - Window management at its finest with its amazing Divvy Grid system. Slate - A window management application similar to Divvy and SizeUp (except better and free!). (Needs config file) SizeUp - Powerful, keyboard-centric window management. Spectacle - Move and resize windows with simple and customizable keyboard shortcuts. Amethyst - A tiling window manager. Magnet - A window manager that keeps your workspace organized. Password Management 1Password - A cross-platform password management tool. LastPass - A password management tool for Mac OS and browser. KeePassX - A light-weight and open-source password management app. MacPass - An open-source KeePass Mac OS client. Keeweb - Free cross-platform password manager compatible with KeePass. Finder Quicklook-Plugins - A list of useful “Quick Look” plugins for developers. ForkLift - The most advanced dual pane file manager and file transfer client for macOS. Path Finder - An all-around file management app. TotalFinder - A Chrome-like app as finder substitute. XtraFinder - Adds tabs and cut to Mac Finder. Quality of Life Improvements CheatSheet - Hold the ⌘-Key to get a list of all active shortcuts of the current application. It’s as simple as that. Snap - Launch an app in a snap. Ridiculously easy shortcut management. KeyCastr - An open-source keystroke visualizer. f.lux - An application makes the color of your computer’s display adapt to the time of day. System Related Tools AppCleaner - A small application which allows you to thoroughly uninstall unwanted apps. iStats - iStats is a command-line tool that allows you to easily grab the CPU temperature, fan speeds and battery information on OS X. Juice - Make your battery information a bit more interesting by making your own measurement scale instead of a boring battery indicator. NitroShare - CROSS-PLATFORM NETWORK FILE TRANSFER APPLICATION. Monity - A system monitoring widget for OS X. SSH Tunnel - An application to manage your SSH. Mounty - A tiny tool to re-mount write-protected NTFS volumes under Mac OS X 10.9+ in read-write mode. Paragon NTFS - Read/write access to NTFS in macOS Sierra. Tuxera NTFS - Full read-write compatibility with NTFS-formatted drives on a Mac. gfxCardStatus - An unobtrusive menu bar app for OS X that allows MacBook Pro users to see which apps are affecting their battery life by using the more power-hungry graphics. DaisyDisk - Gives you a great overview of disk usage. Can also make more disk-space available by cleaning up your disk. OmniDiskSweeper - Shows you the files on your drive, ordered by size. It can be used to find and remove unused files. iStat Menus - An advanced Mac system monitor on the menubar. HTML5 Player - An HTML 5 video player. Keep your Mac from “burning”. InsomniaX - Disable either lid and/or idle sleep (so you can play music with your lid closed, for example). Caffeine - An app that doesn’t let your Mac to fall asleep. KeepingYouAwake – Alternative to Caffeine with better support for dark mode in Mac. ! NoSleep NoSleep makes closing of your MacBook lid possible without going into sleep mode. Coolant - A menubar app that lets you know when an app is consuming 100% CPU or more than a gigabyte of memory (or any arbitrary limits you choose). HandShaker - Mac on the management of Android mobile phone content. Gaming Software OpenEmu - A great video game console emulator, supports many different emulators in a single application. (e.g. Sony PSP, GameBoy, NDS and so on) Other WWDC - The Mac OS unofficial WWDC app. Remote Login Software TeamViewer - A proprietary computer software package for remote control, desktop sharing, online meetings, web conferencing and file transfer between computers. RealVNC The original and best software for remote access across desktop and mobile. AnyDesk An application which provides Remote access across multiple machines. QuickLook PluginsUsing Homebrew Cask to install. List of useful Quick Look plugins for developers. If you install it manually, you can move the downloaded .qlgenerator file to~ / Library / QuickLook qlmanage -r QuicklookStephen - Preview plain text files without or with unknown file extension. such as README、INSTALL、Capfile、CHANGELOG…brew cask install qlstephen QLColorCode - Preview source code files with syntax highlighting. brew cask install qlcolorcode QLMarkdown - Preview Markdown files. brew cask install qlmarkdown QuickLookJSON - Preview JSON files. brew cask install quicklook-json QLPrettyPatch - Preview .patch files. brew cask install qlprettypatch QuickLookCSV - Preview CSV files. brew cask install quicklook-csv BetterZipQL - Preview the compressed format file for BetterZip software. brew cask install betterzipql qlImageSize - Display image size and resolution. brew cask install qlimagesize WebP - Preview WebP images. brew cask install webpquicklook Suspicious Package - Preview the contents of a standard Apple installer package. brew cask install suspicious-package QuickLookASE - Preview Adobe ASE Color Swatches generated with Photoshop，Illustrator，Prisma among many others. brew cask install quicklookase QLVideo - Preview most types of video files, as well as their thumbnails, cover art and metadata. brew cask install qlvideo QuickLookAPK - Preview Android APK files. brew cask install quicklookapk ProvisionQL - Preview iOS / macOS app and provision information. brew cask install provisionql quicklook-pat - Preview Adobe Photoshop pattern files. brew cask install quicklook-pat Third Party App MarketsIf you come across websites offering pirated software or cracks, please post HERE. We love apps, but only authentic ones. :) Get AppsHere are some of the major software download sites, there are a number of OSX Mac software sites MacUpdate Desktop - Simplifies finding, buying and installing apps for your Mac. Homebrew Cask - A command line installation manager which extends Homebrew and brings its elegance, simplicity, and speed to Mac OS applications and large binaries alike. Homebrew - The missing package manager for macOS. MacPorts - The MacPorts Project is an open-source community initiative to design an easy-to-use system for compiling, installing, and upgrading either command-line, X11 or Aqua based open-source software on the Mac OS X operating system. Black-ListThird party app market black list 腾讯电脑管家 - 电脑管家for Mac 带应用市场。 迅雷Thunder Store - 迅雷Thunder for Mac 带应用市场。 Mac软件宝箱 - Macx推出软件宝箱。 MacHunter - Mac应用市场。 Mac App Download SitesHere are some of the major software download sites, there are a number of OSX Mac software sites Genuine Sites Slant - I personally recommend this. This is a platform where you can compare apps side-by-side, you might get an idea by seeing other users recommendations. Please contribute if you find an application from this list! alternativeTo - Also a very nice community. If you are looking for some alternative apps FOR Windows or another platform, check this site. Other sites like MacStories, LifeHacker, ProductHunt are great resources. Also, Quora, Reddit, you know the drill. MacUpdate：https://www.macupdate.com/ App Shopper：http://appshopper.com/ HackStore An amazing free alternative to the App Store for side developers and apps for Mac OS which Apple doesn’t accept. Chinese community 少数派：http://sspai.com/tag/Mac Mac玩儿法：http://www.waerfa.com Pirated software download site blacklistRefuse piracy from me. Software vendors can go to these places rights. 玩转苹果：http://www.ifunmac.com Mac软件下载站：http://www.pshezi.com MacPeers：http://www.macpeers.com Mac志：http://www.isofts.org Mac软件分享：http://www.waitsun.com AppKed：http://www.macbed.com 苹果软件园：http://www.maczapp.com Mac精品软件：http://xclient.info/ Macx：http://www.macx.cn/ 腾牛网：http://www.qqtn.com/mac/r_17_1.html ⬆ Top : https://jaywcjlove.github.io/sb/ico/min-oss.svg “Open Source Software”: https://jaywcjlove.github.io/sb/ico/min-free.svg “Free Software”: https://jaywcjlove.github.io/sb/ico/min-hot.svg “Hot Software”: https://jaywcjlove.github.io/sb/ico/min-tuijian.svg “Recommend Software”: https://jaywcjlove.github.io/sb/ico/min-bibei.svg “Must Have Software”: https://jaywcjlove.github.io/sb/star/red.svg “1 Star Software”: https://jaywcjlove.github.io/sb/ico/min-app-store.svg “App Store Software”","categories":[{"name":"杂谈","slug":"杂谈","permalink":"http://yoursite.com/categories/杂谈/"}],"tags":[]},{"title":"One Day Traveling in Yinxing Lake","slug":"I-love-Xumengyue","date":"2017-09-14T14:47:34.000Z","updated":"2018-07-28T15:56:50.326Z","comments":true,"path":"2017/09/14/I-love-Xumengyue/","link":"","permalink":"http://yoursite.com/2017/09/14/I-love-Xumengyue/","excerpt":"","text":"One Day Traveling in Yinxing Lake","categories":[{"name":"测试","slug":"测试","permalink":"http://yoursite.com/categories/测试/"}],"tags":[{"name":"测试","slug":"测试","permalink":"http://yoursite.com/tags/测试/"}]},{"title":"Web crawling CSI 300 index using Python","slug":"Web crawling CSI 300 index using Python","date":"2017-08-08T04:48:03.000Z","updated":"2018-07-26T02:16:46.499Z","comments":true,"path":"2017/08/08/Web crawling CSI 300 index using Python/","link":"","permalink":"http://yoursite.com/2017/08/08/Web crawling CSI 300 index using Python/","excerpt":"","text":"Simulating browser loginYou must make sure that you have installed firefox browser. 123456789from selenium import webdriverfrom selenium.webdriver.common.keys import Keysimport timeimport pandas as pdimport reimport numpy as npfrom bs4 import BeautifulSoupdriver = webdriver.Firefox() Finding the CSI 300 index url in Google Finance1234567891011121314151617181920212223242526272829303132333435363738394041var = [&apos;Date&apos;, &apos;Open&apos;, &apos;High&apos;, &apos;Low&apos;, &apos;Close&apos;, &apos;Volume&apos;]csi = &#123;&#125;for j in range(0,29): urll = &quot;https://www.google.com/finance/historical?cid=1979150&amp;startdate=Jan%201%2C%202014&amp;enddate=Jul%2010%2C%202017&amp;num=30&amp;ei=BxBkWdGLK5DijAHogaDwCg&quot;+&quot;&amp;start=%s&quot; % (j*30) driver.get(urll) html = BeautifulSoup(driver.page_source,&apos;lxml&apos;) info = html.find_all(&apos;table&apos;, class_=&quot;gf-table historical_price&quot;) info1 = info[0] info3 = info1.find_all(&quot;td&quot;) for i in range(len(info3)-1): if i % 6 == 0: valuetag = info3[i] value = valuetag.string value = value.replace(&quot;\\n&quot;,&quot;&quot;) csi.setdefault(var[0],[]).append(value) elif i % 6 == 1: valuetag = info3[i] value = valuetag.string value = value.replace(&quot;\\n&quot;,&quot;&quot;) csi.setdefault(var[1],[]).append(value) elif i % 6 == 2: valuetag = info3[i] value = valuetag.string value = value.replace(&quot;\\n&quot;,&quot;&quot;) csi.setdefault(var[2],[]).append(value) elif i % 6 == 3: valuetag = info3[i] value = valuetag.string value = value.replace(&quot;\\n&quot;,&quot;&quot;) csi.setdefault(var[3],[]).append(value) elif i % 6 == 4: valuetag = info3[i] value = valuetag.string value = value.replace(&quot;\\n&quot;,&quot;&quot;) csi.setdefault(var[4],[]).append(value) else: valuetag = info3[i] value = valuetag.string value = value.replace(&quot;\\n&quot;,&quot;&quot;) csi.setdefault(var[5],[]).append(value) Writing file in local folder1234data = pd.DataFrame.from_dict(csi,orient=&apos;index&apos;).Tdata.to_csv(&apos;data.csv&apos;,header = True,encoding=&quot;utf_8_sig&quot;)","categories":[{"name":"杂谈","slug":"杂谈","permalink":"http://yoursite.com/categories/杂谈/"}],"tags":[]},{"title":"Install R and RStudio in Ubuntu","slug":"Install-R-and-RStudio-in-Ubuntu","date":"2017-08-07T04:48:03.000Z","updated":"2018-07-26T02:16:39.899Z","comments":true,"path":"2017/08/07/Install-R-and-RStudio-in-Ubuntu/","link":"","permalink":"http://yoursite.com/2017/08/07/Install-R-and-RStudio-in-Ubuntu/","excerpt":"","text":"Install RAdd Mirror source12sudo gedit /etc/apt/sources.listdeb http://cran.rstudio.com/bin/linux/ubuntu trusty/ # Add the code in the end of sources.list Run command of downloading public key12sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 51716619E084DAB9sudo apt-get update # Update Install R12sudo apt-get install r-baseR # Verify whether it succeed Install RStudioVisit http://www.rstudio.com/products/rstudio/download/ download related file Input code in Terminal123sudo apt-get install gdebi-coresudo apt-get install libapparmor1 # Required only for Ubuntu, not Debiansudo gdebi * # Downloaded RStudio*.deb file","categories":[{"name":"杂谈","slug":"杂谈","permalink":"http://yoursite.com/categories/杂谈/"}],"tags":[]},{"title":"Install Hadoop on Ubuntu","slug":"Install Hadoop on Ubuntu","date":"2017-08-07T04:48:03.000Z","updated":"2018-07-26T02:16:21.187Z","comments":true,"path":"2017/08/07/Install Hadoop on Ubuntu/","link":"","permalink":"http://yoursite.com/2017/08/07/Install Hadoop on Ubuntu/","excerpt":"","text":"Install JDKVisit http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html and download jre-8u121-linux-x64.tar.gz file to Home. Open terminal, get root and create new folder on the home1234sudo passwd root # set root passwordsu # get rootgedit /etc/sudoers # add chan ALL(ALL) ALL to behind root linesudo mkdir hadoop # create new folder Copy jre-8u121-linux-x64.tar.gz file to hadoop folder1cp jre-8u121-linux-x64.tar.gz /home/chan/hadoop # chan is user name Explode jre-8u121-linux-x64.tar.gz file123cd home/chan/hadooptar -zxvf jre-8u121-linux-x64.tar.gz # exploderm jre-8u121-linux-x64.tar.gz # delete Set JDK environment variable1sudo gedit /etc/profile Add codes at the end of profile123export JAVA_HOME=/home/name(user)/hadoop/jre1.8.0_121 # the name of the JDK folderexport PATH=$JAVA_HOME/bin:$PATHexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar Check12source /etc/profile # make JDK effectivejava -version # showing java version &quot;xxxx&quot;, it succeed Configure hosts fileRevise hostname123sugedit etc/hostname # revise hostname to &quot;master&quot; and input slave1, slave2 in othersreboot Check IP address1ifconfig # copy IP address Configure host12sugedit /etc/hosts #paste IP address and input &quot;master&quot;, &quot;slave1&quot;, &quot;slave2&quot; Copy configured host to slaves12scp /etc/hosts root@slave1:/etc/scp /etc/hosts root@slave2:/etc/ 2.5 Check slavers whether connected 12ping slave1 # must input in masterping slave2 SSH login without passwordTurn off firewall123susysv-rc-conf iptables off # need install sys-rc-confreboot Configure SSH in master123456ssh-keygen -t rsa # press ENTERcd .sshcat id_rsa.pub &gt;&gt; authorized_keyschmod 600 authorized_keysscp authorized_keys chan@slave1:~/.ssh/scp authorized_keys chan(user)@slave2:~/.ssh/ Check for success123ssh slave1ssh slave2shh master Install and configure Hadoop in masterVisit http://apache.fayea.com/hadoop/common/ and download hadoop-2.6.4.tar.gz Copy hadoop-2.6.4.tar.gz to hadoop folder12cd hadooptar -zxvf hadoop-2.6.4.tar.gz Configure files of HadoopConfigure hadoop-env.sh12345cd hadoop/hadoop-2.6.4cd etc/hadoopgedit hadoop-env.sh# add this code at end of hadoop-env.shexport JAVA_HOME=/home/chan/hadoop/jre1.8.0_121 Configure core-site.xml12345678910111213141516gedit core-site.xml# add this code between configuration&lt;property&gt; &lt;name&gt;fs.default.name&lt;/name&gt; &lt;value&gt;hdfs://master:9000&lt;/value&gt; &lt;final&gt;true&lt;/final&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/home/chan/hadoop/tmp&lt;/value&gt; # user name&lt;/property&gt;&lt;property&gt;&lt;name&gt;fs.default.name&lt;/name&gt; &lt;value&gt;hdfs://master:54310&lt;/value&gt; &lt;final&gt;true&lt;/final&gt;&lt;/property&gt; Configure hdfs-site.xml12345678910111213141516gedit hdfs-site.xml# add this code between configuration&lt;property&gt; &lt;name&gt;fs.default.name&lt;/name&gt; &lt;value&gt;file:/home/chan/hadoop/dfs/name&lt;/value&gt; # user name &lt;final&gt;true&lt;/final&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; &lt;value&gt;file:/home/chan/hadoop/dfs/data&lt;/value&gt; #user name &lt;final&gt;true&lt;/final&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;2&lt;/value&gt;&lt;/property&gt; Configure mapred-site.xml12345678910111213141516mv mapred-site.xml.template mapred-site.xml # renamegedit mapred-site.xml# add this code between configuration&lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt; &lt;value&gt;master:10020&lt;/value&gt; &lt;final&gt;true&lt;/final&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt; &lt;value&gt;master:19888&lt;/value&gt;&lt;/property&gt; Configure yarn-site.xml123456789101112131415161718192021222324252627282930gedit yarn-site.xml# add this code between configuration&lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;yarn.nodemanager.aux-serivces.mapreduce.shuffle.class&lt;/name&gt; &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt; &lt;value&gt;master:8032&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt; &lt;value&gt;master:8030&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt; &lt;value&gt;master:8031&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt; &lt;value&gt;master:8033&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt; &lt;value&gt;master:8088&lt;/value&gt;&lt;/property&gt; Configure master123gedit master#add this codemaster Configure slaves12345gedit slaves#add this codemasterslave1slave2 Copy configured files to slaves1234cdcd hadoopscp -r hadoop-2.6.4 slave1:~/hadoopscp -r hadoop-2.6.4 slave2:~/hadoop Start cluster1234cdcd hadoop/hadoop-2.6.4bin/hdfs namenode -format # format namenodesbin/start-all.sh Check cluster1jps # maybe need install","categories":[{"name":"杂谈","slug":"杂谈","permalink":"http://yoursite.com/categories/杂谈/"}],"tags":[]}]}